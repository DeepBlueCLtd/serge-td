{"version":3,"sources":["../node_modules/brace/mode sync /^/.*$","../node_modules/brace/theme sync /^/.*$","components/homepage/styles.js","actions/messages.js","actions/chats.js","actions/rewindPoints.js","defaults/messageTypesKeys.js","databases/index.js","defaults/allowedChats.js","components/control/rewindForm.js","components/control/styles.js","components/control/rewindList.js","containers/rewinds.js","components/control/index.js","containers/control.js","components/chatlist/styles.js","components/chat/messages/styles.js","defaults/schemeColors/theme.js","defaults/schemeColors/scheme.js","defaults/schemeColors/messageScheme.js","components/chat/messages/index.js","containers/messages.js","defaults/schemeColors/chatScheme.js","databases/views.js","databases/filters.js","components/chat/styles.js","components/chat/header.js","containers/chat/header.js","components/chat/form.js","components/chat/footer.js","containers/chat/footer.js","components/chat/index.js","containers/chat/index.js","defaults/schemeSizes.js","components/chatlist/index.js","containers/chatlist.js","components/homepage/index.js","actions/exportItems.js","components/exportItems/styles.js","components/exportItems/excel.js","components/exportItems/index.js","containers/exportItems.js","components/jsonSchemaEditor/styles.js","js-modules/json-schema-editor/editor.js","components/jsonSchemaEditor/jsonEditor.js","components/jsonSchemaEditor/editorPreview.js","components/jsonSchemaEditor/metaSchema.js","defaults/jsonEditor.js","components/jsonSchemaEditor/options.js","components/devSection/index.js","components/jsonSchemaEditor/index.js","components/checkDb.js","components/pouchStore/index.js","containers/pouchStore.js","actions/init.js","components/root.js","serviceWorker.js","reducers/chats.js","defaults/messageTypes.js","reducers/messageTypes.js","reducers/messages.js","reducers/rewindPoints.js","reducers/exportItems.js","reducers/index.js","middlewares/pouchdb/rewindPoints.js","middlewares/pouchdb/exportItems.js","middlewares/pouchdb/index.js","index.js"],"names":["map","./abap","./abap.js","./abc","./abc.js","./actionscript","./actionscript.js","./ada","./ada.js","./apache_conf","./apache_conf.js","./applescript","./applescript.js","./asciidoc","./asciidoc.js","./assembly_x86","./assembly_x86.js","./autohotkey","./autohotkey.js","./batchfile","./batchfile.js","./bro","./bro.js","./c9search","./c9search.js","./c_cpp","./c_cpp.js","./cirru","./cirru.js","./clojure","./clojure.js","./cobol","./cobol.js","./coffee","./coffee.js","./coldfusion","./coldfusion.js","./csharp","./csharp.js","./csound_document","./csound_document.js","./csound_orchestra","./csound_orchestra.js","./csound_score","./csound_score.js","./css","./css.js","./curly","./curly.js","./d","./d.js","./dart","./dart.js","./diff","./diff.js","./django","./django.js","./dockerfile","./dockerfile.js","./dot","./dot.js","./drools","./drools.js","./eiffel","./eiffel.js","./ejs","./ejs.js","./elixir","./elixir.js","./elm","./elm.js","./erlang","./erlang.js","./forth","./forth.js","./fortran","./fortran.js","./ftl","./ftl.js","./gcode","./gcode.js","./gherkin","./gherkin.js","./gitignore","./gitignore.js","./glsl","./glsl.js","./gobstones","./gobstones.js","./golang","./golang.js","./graphqlschema","./graphqlschema.js","./groovy","./groovy.js","./haml","./haml.js","./handlebars","./handlebars.js","./haskell","./haskell.js","./haskell_cabal","./haskell_cabal.js","./haxe","./haxe.js","./hjson","./hjson.js","./html","./html.js","./html_elixir","./html_elixir.js","./html_ruby","./html_ruby.js","./ini","./ini.js","./io","./io.js","./jack","./jack.js","./jade","./jade.js","./java","./java.js","./javascript","./javascript.js","./json","./json.js","./jsoniq","./jsoniq.js","./jsp","./jsp.js","./jssm","./jssm.js","./jsx","./jsx.js","./julia","./julia.js","./kotlin","./kotlin.js","./latex","./latex.js","./lean","./lean.js","./less","./less.js","./liquid","./liquid.js","./lisp","./lisp.js","./live_script","./live_script.js","./livescript","./livescript.js","./logiql","./logiql.js","./lsl","./lsl.js","./lua","./lua.js","./luapage","./luapage.js","./lucene","./lucene.js","./makefile","./makefile.js","./markdown","./markdown.js","./mask","./mask.js","./matlab","./matlab.js","./mavens_mate_log","./mavens_mate_log.js","./maze","./maze.js","./mel","./mel.js","./mips_assembler","./mips_assembler.js","./mipsassembler","./mipsassembler.js","./mushcode","./mushcode.js","./mysql","./mysql.js","./nix","./nix.js","./nsis","./nsis.js","./objectivec","./objectivec.js","./ocaml","./ocaml.js","./pascal","./pascal.js","./perl","./perl.js","./pgsql","./pgsql.js","./php","./php.js","./pig","./pig.js","./plain_text","./plain_text.js","./powershell","./powershell.js","./praat","./praat.js","./prolog","./prolog.js","./properties","./properties.js","./protobuf","./protobuf.js","./python","./python.js","./r","./r.js","./razor","./razor.js","./rdoc","./rdoc.js","./red","./red.js","./rhtml","./rhtml.js","./rst","./rst.js","./ruby","./ruby.js","./rust","./rust.js","./sass","./sass.js","./scad","./scad.js","./scala","./scala.js","./scheme","./scheme.js","./scss","./scss.js","./sh","./sh.js","./sjs","./sjs.js","./smarty","./smarty.js","./snippets","./snippets.js","./soy_template","./soy_template.js","./space","./space.js","./sparql","./sparql.js","./sql","./sql.js","./sqlserver","./sqlserver.js","./stylus","./stylus.js","./svg","./svg.js","./swift","./swift.js","./swig","./swig.js","./tcl","./tcl.js","./tex","./tex.js","./text","./text.js","./textile","./textile.js","./toml","./toml.js","./tsx","./tsx.js","./turtle","./turtle.js","./twig","./twig.js","./typescript","./typescript.js","./vala","./vala.js","./vbscript","./vbscript.js","./velocity","./velocity.js","./verilog","./verilog.js","./vhdl","./vhdl.js","./wollok","./wollok.js","./xml","./xml.js","./xquery","./xquery.js","./yaml","./yaml.js","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","./ambiance","./ambiance.js","./chaos","./chaos.js","./chrome","./chrome.js","./clouds","./clouds.js","./clouds_midnight","./clouds_midnight.js","./cobalt","./cobalt.js","./crimson_editor","./crimson_editor.js","./dawn","./dawn.js","./dracula","./dracula.js","./dreamweaver","./dreamweaver.js","./eclipse","./eclipse.js","./github","./github.js","./gob","./gob.js","./gruvbox","./gruvbox.js","./idle_fingers","./idle_fingers.js","./iplastic","./iplastic.js","./katzenmilch","./katzenmilch.js","./kr_theme","./kr_theme.js","./kuroir","./kuroir.js","./merbivore","./merbivore.js","./merbivore_soft","./merbivore_soft.js","./mono_industrial","./mono_industrial.js","./monokai","./monokai.js","./pastel_on_dark","./pastel_on_dark.js","./solarized_dark","./solarized_dark.js","./solarized_light","./solarized_light.js","./terminal","./terminal.js","./textmate","./textmate.js","./tomorrow","./tomorrow.js","./tomorrow_night","./tomorrow_night.js","./tomorrow_night_blue","./tomorrow_night_blue.js","./tomorrow_night_bright","./tomorrow_night_bright.js","./tomorrow_night_eighties","./tomorrow_night_eighties.js","./twilight","./twilight.js","./vibrant_ink","./vibrant_ink.js","./xcode","./xcode.js","StyleSheet","create","main","padding","PUSH_MESSAGES","REMOVE_ALL_MESSAGES","UPDATE_MESSAGES","SAVE_DRAFT","SEND_DRAFT_MESSAGE","saveDraft","draftMessage","type","payload","message","ADD_CHAT","REMOVE_CHAT","CREATE_REWIND_POINT","REMOVE_REWIND_POINT","SELECT_REWIND_POINT","UPDATE_REWIND_POINTS","options","showOnGameControl","chatAddBtnSettings","defaultOptions","showOnGameControlCreateChats","addChatIdToChatFromArray","addChatIdToChatToArray","preFillFrom","chats","chatId","label","objectSpread","getGameControlChats","filter","chat","RewindForm","_ref","createRewindPoint","input","React","createRef","react_default","a","createElement","CardFooter","onSubmit","preventDefault","current","value","length","InputGroup","Input","innerRef","placeholder","InputGroupAddon","addonType","Button","color","hide","display","createMessage","createMessageShow","RewindList","rewinds","selectRewindPoint","removeRewindPoint","CardBody","className","css","styles","ListGroup","_ref2","key","doc","ListGroupItem","tag","active","onClick","_id","name","RewindsContainer","connect","state","rewindPoints","points","activeRewind","dispatch","ChatControll","props","content","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","newMessageForm","bind","assertThisInitialized","closeMessageForm","injectForm","generateMessages","editor","editorRef","activeSchema","createChats","count","_this2","createMessages","Array","apply","messageType","messageTypes","Math","floor","random","required","reduce","field","scheme","enumArr","properties","enum","isArray","format","toString","loremIpsum","default","target","destroy","setState","schema","from","sort","x","y","JSONEditor","theme","validate","getValue","_this3","Row","Col","md","Card","CardHeader","parseInt","title","includes","removeChat","createChat","rewindForm","containers_rewinds","block","href","clearMessages","ref","Component","ControlContainer","messages","pointName","database","db","Control","chatItem","paddingBottom","height","position","paddingTop",":after","width","top","background","left",":before","bottom","zIndex","container","maxHeight","item","verticalAligin","maxWidth","scrolContent","badge","fontSize","lineHeight","borderRadius","overflow","opacity",":hover","badgeLeft","badgeBg","scrollbar","boxSizing","margin","bg","blue","gray","green","red","yellow","black","white","lightBlue","lightGray","lightBlack","buttons","transparent","text","ColorScheme","itemId","items","itemDefault","global","getItemScheme","getGlobalScheme","MessageScheme","ChatMessages","timeId","loadTimeId","loading","scrolledDown","loadMoreCount","getScrollHeight","onScrollUp","onYReachStart","onYReachEnd","scrollToDown","firstScrolled","showItemsCount","clearTimeout","setTimeout","currentHeigth","_container","scrollTop","scrollHeight","newItemsCount","fromChat","colorScheme","MessageColorScheme","itemStyles","textAlign","style","classNames","charAt","_this4","lib_default","suppressScrollX","contentClassName","slice","max","msg","renderItem","MessagesContainer","Messages","ChatScheme","btn","body","footer","light","tab","activeTab","cn","require","dbOptions","getDb","dbKey","sync","optionsManual","PouchDB","optLoc","remote","remoteDB","replicate","to","live","retry","on","done","console","log","forEach","concat","views","query","view","params","namespace","split","catch","err","status","put","then","cloneFilter","filters","prefix","right","labelContainer","labelButton","paddingRight","paddingLeft","ChatHeader","button","children","defaultMessageType","createDraft","defaultValues","HeaderContainer","find","Header","ChatForm","initForm","submitForm","getFormFilteredData","editorBox","hiddenAutofillKeys","setValue","form","values","formFiltered","toConsumableArray","messageFiltered","requiredKey","indexOf","splice","formData","_loop","editors","hasOwnProperty","watch","data","defineProperty","replace","getEditor","sendDraftMessage","ChatFooter","renderDropdown","toggle","toggleDropdown","renderTabs","showDropdownAfter","activeDraft","dropdownOpen","Dropdown","isOpen","DropdownToggle","caret","DropdownMenu","DropdownItem","Nav","tabs","NavItem","NavLink","TabContent","TabPane","tabId","chat_form","FooterContainer","draft","Footer","Chat","updateState","f","changeTimer","include_docs","rows","updateMessages","changeTime","initDatabase","dbName","changes","ChatColorScheme","getScheme","isActiveRewind","local","newDb","cancel","since","chat_header","containers_messages","chat_footer","ChatContainer","point","Chatlist","xs","chatSizes","sm","containers_chat","ChatsContainer","stage","Chats","Homepage","Container","fluid","containers_chatlist","containers_control","CREATE_EXPORT","REMOVE_EXPORTS","fontWeight","pageTitle","marginBottom","ExcelExport","exp","index","ids","xlsx","xls","csv","generateFile","excellentExport","convert","anchor","filename","dataItem","fields","arrayHasHeader","array","fld","toUpperCase","ButtonGroup","size","Export","exportItems","createExport","removeExports","excel","ExportContainer","ExportItems","devSection","Editor","elementId","jsonEditor","renderZone","document","getElementById","PreviewEditor","SchemaEditor","isObjectPropertiesButton","node","matches","span","parentElement","querySelector","innerText","observer","MutationObserver","mutationsList","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","addedNodes","nodeType","icon","classList","remove","add","return","observe","childList","subtree","prototype","updateSchema","getJSON","enumerable","writable","no_additional_properties","custom_validators","path","errors","minimum","maximum","push","property","root","getButton","button_holder","getHeaderButtonHolder","appendChild","header","parentNode","insertBefore","nextSibling","addEventListener","contents","blob","Blob","JSON","stringify","window","navigator","msSaveOrOpenBlob","download","URL","createObjectURL","dataset","downloadurl","join","dispatchEvent","MouseEvent","bubbles","cancelable","JsonSchemaEditor","schemaEditor","onChange","updateEditor","saved","defaultValue","newValue","alert","newJson","save","counter","defaults","object_layout","layout","booleanOptions","EditorPreview","previewBox","editorPreview","MetaSchema","setEditorValue","onUpdateClick","saveJson","json","session","getSelection","clearSelection","resize","onSchemaSubmit","dist_default","mode","setReadOnly","selected","onBooleanOptionsChange","onLayoutChange","i","l","multiple","option","DevSection","process","MessageTypes","iconlib","updateMetaSchema","updatePreviewSchema","updateOptions","Date","Status","Description","metaSchema","jsonMetaSchema","previewSchema","metaschema","jsonSchemaEditor_options","CheckDb","check","messagesFiltersInitialized","messagesViewsInitialized","checkMessages","checkFilter","checkView","filterKeys","currentKey","docId","get","row","equal","viewKeys","PouchStore","initStore","PouchStoreContainer","Root","store","es","containers_pouchStore","checkDb","BrowserRouter","Switch","Route","exact","component","Boolean","location","hostname","match","initialState","persistentReducer","arguments","action","description","weight","prop","getMessageTypes","getId","toISOString","initAdditionalAttributes","bulkDocs","allDocs","result","Promise","all","search","rev","_rev","_deleted","combineReducers","cloneDatabase","reject","messagesDbName","messagesRemoteDbName","doneRemote","init","updateLocalRewindPoints","rewindPoint","roomId","messagesDb","clonedData","changedDocs","checkMessageTypes","emit","findByMessageType","rewindPointsDb","pouchdbMiddleware","rewindAction","exportAction","applyMiddlewares","applyMiddleware","thunk","pouchdbSync","composeWithDevTools","persistentStore","createStore","createStoreWithMiddleware","reducers","ReactDOM","render","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.006c0a47.chunk.js","sourcesContent":["var map = {\n\t\"./abap\": 72,\n\t\"./abap.js\": 72,\n\t\"./abc\": 73,\n\t\"./abc.js\": 73,\n\t\"./actionscript\": 74,\n\t\"./actionscript.js\": 74,\n\t\"./ada\": 75,\n\t\"./ada.js\": 75,\n\t\"./apache_conf\": 76,\n\t\"./apache_conf.js\": 76,\n\t\"./applescript\": 77,\n\t\"./applescript.js\": 77,\n\t\"./asciidoc\": 78,\n\t\"./asciidoc.js\": 78,\n\t\"./assembly_x86\": 79,\n\t\"./assembly_x86.js\": 79,\n\t\"./autohotkey\": 80,\n\t\"./autohotkey.js\": 80,\n\t\"./batchfile\": 81,\n\t\"./batchfile.js\": 81,\n\t\"./bro\": 82,\n\t\"./bro.js\": 82,\n\t\"./c9search\": 83,\n\t\"./c9search.js\": 83,\n\t\"./c_cpp\": 84,\n\t\"./c_cpp.js\": 84,\n\t\"./cirru\": 85,\n\t\"./cirru.js\": 85,\n\t\"./clojure\": 86,\n\t\"./clojure.js\": 86,\n\t\"./cobol\": 87,\n\t\"./cobol.js\": 87,\n\t\"./coffee\": 88,\n\t\"./coffee.js\": 88,\n\t\"./coldfusion\": 89,\n\t\"./coldfusion.js\": 89,\n\t\"./csharp\": 90,\n\t\"./csharp.js\": 90,\n\t\"./csound_document\": 91,\n\t\"./csound_document.js\": 91,\n\t\"./csound_orchestra\": 92,\n\t\"./csound_orchestra.js\": 92,\n\t\"./csound_score\": 93,\n\t\"./csound_score.js\": 93,\n\t\"./css\": 94,\n\t\"./css.js\": 94,\n\t\"./curly\": 95,\n\t\"./curly.js\": 95,\n\t\"./d\": 96,\n\t\"./d.js\": 96,\n\t\"./dart\": 97,\n\t\"./dart.js\": 97,\n\t\"./diff\": 98,\n\t\"./diff.js\": 98,\n\t\"./django\": 99,\n\t\"./django.js\": 99,\n\t\"./dockerfile\": 100,\n\t\"./dockerfile.js\": 100,\n\t\"./dot\": 101,\n\t\"./dot.js\": 101,\n\t\"./drools\": 102,\n\t\"./drools.js\": 102,\n\t\"./eiffel\": 103,\n\t\"./eiffel.js\": 103,\n\t\"./ejs\": 104,\n\t\"./ejs.js\": 104,\n\t\"./elixir\": 105,\n\t\"./elixir.js\": 105,\n\t\"./elm\": 106,\n\t\"./elm.js\": 106,\n\t\"./erlang\": 107,\n\t\"./erlang.js\": 107,\n\t\"./forth\": 108,\n\t\"./forth.js\": 108,\n\t\"./fortran\": 109,\n\t\"./fortran.js\": 109,\n\t\"./ftl\": 110,\n\t\"./ftl.js\": 110,\n\t\"./gcode\": 111,\n\t\"./gcode.js\": 111,\n\t\"./gherkin\": 112,\n\t\"./gherkin.js\": 112,\n\t\"./gitignore\": 113,\n\t\"./gitignore.js\": 113,\n\t\"./glsl\": 114,\n\t\"./glsl.js\": 114,\n\t\"./gobstones\": 115,\n\t\"./gobstones.js\": 115,\n\t\"./golang\": 116,\n\t\"./golang.js\": 116,\n\t\"./graphqlschema\": 117,\n\t\"./graphqlschema.js\": 117,\n\t\"./groovy\": 118,\n\t\"./groovy.js\": 118,\n\t\"./haml\": 119,\n\t\"./haml.js\": 119,\n\t\"./handlebars\": 120,\n\t\"./handlebars.js\": 120,\n\t\"./haskell\": 121,\n\t\"./haskell.js\": 121,\n\t\"./haskell_cabal\": 122,\n\t\"./haskell_cabal.js\": 122,\n\t\"./haxe\": 123,\n\t\"./haxe.js\": 123,\n\t\"./hjson\": 124,\n\t\"./hjson.js\": 124,\n\t\"./html\": 125,\n\t\"./html.js\": 125,\n\t\"./html_elixir\": 126,\n\t\"./html_elixir.js\": 126,\n\t\"./html_ruby\": 127,\n\t\"./html_ruby.js\": 127,\n\t\"./ini\": 128,\n\t\"./ini.js\": 128,\n\t\"./io\": 129,\n\t\"./io.js\": 129,\n\t\"./jack\": 130,\n\t\"./jack.js\": 130,\n\t\"./jade\": 131,\n\t\"./jade.js\": 131,\n\t\"./java\": 132,\n\t\"./java.js\": 132,\n\t\"./javascript\": 133,\n\t\"./javascript.js\": 133,\n\t\"./json\": 134,\n\t\"./json.js\": 134,\n\t\"./jsoniq\": 135,\n\t\"./jsoniq.js\": 135,\n\t\"./jsp\": 136,\n\t\"./jsp.js\": 136,\n\t\"./jssm\": 137,\n\t\"./jssm.js\": 137,\n\t\"./jsx\": 138,\n\t\"./jsx.js\": 138,\n\t\"./julia\": 139,\n\t\"./julia.js\": 139,\n\t\"./kotlin\": 140,\n\t\"./kotlin.js\": 140,\n\t\"./latex\": 141,\n\t\"./latex.js\": 141,\n\t\"./lean\": 142,\n\t\"./lean.js\": 142,\n\t\"./less\": 143,\n\t\"./less.js\": 143,\n\t\"./liquid\": 144,\n\t\"./liquid.js\": 144,\n\t\"./lisp\": 145,\n\t\"./lisp.js\": 145,\n\t\"./live_script\": 146,\n\t\"./live_script.js\": 146,\n\t\"./livescript\": 147,\n\t\"./livescript.js\": 147,\n\t\"./logiql\": 148,\n\t\"./logiql.js\": 148,\n\t\"./lsl\": 149,\n\t\"./lsl.js\": 149,\n\t\"./lua\": 150,\n\t\"./lua.js\": 150,\n\t\"./luapage\": 152,\n\t\"./luapage.js\": 152,\n\t\"./lucene\": 153,\n\t\"./lucene.js\": 153,\n\t\"./makefile\": 154,\n\t\"./makefile.js\": 154,\n\t\"./markdown\": 155,\n\t\"./markdown.js\": 155,\n\t\"./mask\": 156,\n\t\"./mask.js\": 156,\n\t\"./matlab\": 157,\n\t\"./matlab.js\": 157,\n\t\"./mavens_mate_log\": 158,\n\t\"./mavens_mate_log.js\": 158,\n\t\"./maze\": 159,\n\t\"./maze.js\": 159,\n\t\"./mel\": 160,\n\t\"./mel.js\": 160,\n\t\"./mips_assembler\": 161,\n\t\"./mips_assembler.js\": 161,\n\t\"./mipsassembler\": 162,\n\t\"./mipsassembler.js\": 162,\n\t\"./mushcode\": 163,\n\t\"./mushcode.js\": 163,\n\t\"./mysql\": 164,\n\t\"./mysql.js\": 164,\n\t\"./nix\": 165,\n\t\"./nix.js\": 165,\n\t\"./nsis\": 166,\n\t\"./nsis.js\": 166,\n\t\"./objectivec\": 167,\n\t\"./objectivec.js\": 167,\n\t\"./ocaml\": 168,\n\t\"./ocaml.js\": 168,\n\t\"./pascal\": 169,\n\t\"./pascal.js\": 169,\n\t\"./perl\": 170,\n\t\"./perl.js\": 170,\n\t\"./pgsql\": 171,\n\t\"./pgsql.js\": 171,\n\t\"./php\": 172,\n\t\"./php.js\": 172,\n\t\"./pig\": 173,\n\t\"./pig.js\": 173,\n\t\"./plain_text\": 174,\n\t\"./plain_text.js\": 174,\n\t\"./powershell\": 175,\n\t\"./powershell.js\": 175,\n\t\"./praat\": 176,\n\t\"./praat.js\": 176,\n\t\"./prolog\": 177,\n\t\"./prolog.js\": 177,\n\t\"./properties\": 178,\n\t\"./properties.js\": 178,\n\t\"./protobuf\": 179,\n\t\"./protobuf.js\": 179,\n\t\"./python\": 180,\n\t\"./python.js\": 180,\n\t\"./r\": 181,\n\t\"./r.js\": 181,\n\t\"./razor\": 182,\n\t\"./razor.js\": 182,\n\t\"./rdoc\": 183,\n\t\"./rdoc.js\": 183,\n\t\"./red\": 184,\n\t\"./red.js\": 184,\n\t\"./rhtml\": 185,\n\t\"./rhtml.js\": 185,\n\t\"./rst\": 186,\n\t\"./rst.js\": 186,\n\t\"./ruby\": 187,\n\t\"./ruby.js\": 187,\n\t\"./rust\": 188,\n\t\"./rust.js\": 188,\n\t\"./sass\": 189,\n\t\"./sass.js\": 189,\n\t\"./scad\": 190,\n\t\"./scad.js\": 190,\n\t\"./scala\": 191,\n\t\"./scala.js\": 191,\n\t\"./scheme\": 192,\n\t\"./scheme.js\": 192,\n\t\"./scss\": 193,\n\t\"./scss.js\": 193,\n\t\"./sh\": 194,\n\t\"./sh.js\": 194,\n\t\"./sjs\": 195,\n\t\"./sjs.js\": 195,\n\t\"./smarty\": 196,\n\t\"./smarty.js\": 196,\n\t\"./snippets\": 197,\n\t\"./snippets.js\": 197,\n\t\"./soy_template\": 198,\n\t\"./soy_template.js\": 198,\n\t\"./space\": 199,\n\t\"./space.js\": 199,\n\t\"./sparql\": 200,\n\t\"./sparql.js\": 200,\n\t\"./sql\": 201,\n\t\"./sql.js\": 201,\n\t\"./sqlserver\": 202,\n\t\"./sqlserver.js\": 202,\n\t\"./stylus\": 203,\n\t\"./stylus.js\": 203,\n\t\"./svg\": 204,\n\t\"./svg.js\": 204,\n\t\"./swift\": 205,\n\t\"./swift.js\": 205,\n\t\"./swig\": 206,\n\t\"./swig.js\": 206,\n\t\"./tcl\": 207,\n\t\"./tcl.js\": 207,\n\t\"./tex\": 208,\n\t\"./tex.js\": 208,\n\t\"./text\": 209,\n\t\"./text.js\": 209,\n\t\"./textile\": 210,\n\t\"./textile.js\": 210,\n\t\"./toml\": 211,\n\t\"./toml.js\": 211,\n\t\"./tsx\": 212,\n\t\"./tsx.js\": 212,\n\t\"./turtle\": 213,\n\t\"./turtle.js\": 213,\n\t\"./twig\": 214,\n\t\"./twig.js\": 214,\n\t\"./typescript\": 215,\n\t\"./typescript.js\": 215,\n\t\"./vala\": 216,\n\t\"./vala.js\": 216,\n\t\"./vbscript\": 217,\n\t\"./vbscript.js\": 217,\n\t\"./velocity\": 218,\n\t\"./velocity.js\": 218,\n\t\"./verilog\": 219,\n\t\"./verilog.js\": 219,\n\t\"./vhdl\": 220,\n\t\"./vhdl.js\": 220,\n\t\"./wollok\": 221,\n\t\"./wollok.js\": 221,\n\t\"./xml\": 222,\n\t\"./xml.js\": 222,\n\t\"./xquery\": 223,\n\t\"./xquery.js\": 223,\n\t\"./yaml\": 224,\n\t\"./yaml.js\": 224\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 303;","var map = {\n\t\"./ambiance\": 225,\n\t\"./ambiance.js\": 225,\n\t\"./chaos\": 226,\n\t\"./chaos.js\": 226,\n\t\"./chrome\": 227,\n\t\"./chrome.js\": 227,\n\t\"./clouds\": 228,\n\t\"./clouds.js\": 228,\n\t\"./clouds_midnight\": 229,\n\t\"./clouds_midnight.js\": 229,\n\t\"./cobalt\": 230,\n\t\"./cobalt.js\": 230,\n\t\"./crimson_editor\": 231,\n\t\"./crimson_editor.js\": 231,\n\t\"./dawn\": 232,\n\t\"./dawn.js\": 232,\n\t\"./dracula\": 233,\n\t\"./dracula.js\": 233,\n\t\"./dreamweaver\": 234,\n\t\"./dreamweaver.js\": 234,\n\t\"./eclipse\": 235,\n\t\"./eclipse.js\": 235,\n\t\"./github\": 236,\n\t\"./github.js\": 236,\n\t\"./gob\": 237,\n\t\"./gob.js\": 237,\n\t\"./gruvbox\": 238,\n\t\"./gruvbox.js\": 238,\n\t\"./idle_fingers\": 239,\n\t\"./idle_fingers.js\": 239,\n\t\"./iplastic\": 240,\n\t\"./iplastic.js\": 240,\n\t\"./katzenmilch\": 241,\n\t\"./katzenmilch.js\": 241,\n\t\"./kr_theme\": 242,\n\t\"./kr_theme.js\": 242,\n\t\"./kuroir\": 243,\n\t\"./kuroir.js\": 243,\n\t\"./merbivore\": 244,\n\t\"./merbivore.js\": 244,\n\t\"./merbivore_soft\": 245,\n\t\"./merbivore_soft.js\": 245,\n\t\"./mono_industrial\": 246,\n\t\"./mono_industrial.js\": 246,\n\t\"./monokai\": 247,\n\t\"./monokai.js\": 247,\n\t\"./pastel_on_dark\": 248,\n\t\"./pastel_on_dark.js\": 248,\n\t\"./solarized_dark\": 249,\n\t\"./solarized_dark.js\": 249,\n\t\"./solarized_light\": 250,\n\t\"./solarized_light.js\": 250,\n\t\"./sqlserver\": 251,\n\t\"./sqlserver.js\": 251,\n\t\"./terminal\": 252,\n\t\"./terminal.js\": 252,\n\t\"./textmate\": 253,\n\t\"./textmate.js\": 253,\n\t\"./tomorrow\": 254,\n\t\"./tomorrow.js\": 254,\n\t\"./tomorrow_night\": 255,\n\t\"./tomorrow_night.js\": 255,\n\t\"./tomorrow_night_blue\": 256,\n\t\"./tomorrow_night_blue.js\": 256,\n\t\"./tomorrow_night_bright\": 257,\n\t\"./tomorrow_night_bright.js\": 257,\n\t\"./tomorrow_night_eighties\": 258,\n\t\"./tomorrow_night_eighties.js\": 258,\n\t\"./twilight\": 259,\n\t\"./twilight.js\": 259,\n\t\"./vibrant_ink\": 260,\n\t\"./vibrant_ink.js\": 260,\n\t\"./xcode\": 261,\n\t\"./xcode.js\": 261\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 306;","import { StyleSheet } from 'aphrodite'\r\n\r\nexport default StyleSheet.create({\r\n  main: {\r\n    padding: '15px 0'\r\n  },\r\n})\r\n","/*\r\n * action types\r\n */\r\n\r\nexport const PUSH_MESSAGES = \"PUSH_MESSAGES\"\r\nexport const REMOVE_ALL_MESSAGES = \"REMOVE_ALL_MESSAGES\"\r\nexport const GENERATE_RANDOM_MESSAGES = \"PUSH_MESSAGES\"\r\nexport const UPDATE_MESSAGES = \"UPDATE_MESSAGES\"\r\nexport const SAVE_DRAFT = \"SAVE_DRAFT\"\r\nexport const SEND_DRAFT_MESSAGE = \"SEND_DRAFT_MESSAGE\"\r\n\r\n/*\r\n * action creators\r\n */\r\n\r\nexport function sendDraftMessage(draftMessage) {\r\n  return { type: SEND_DRAFT_MESSAGE, payload: { message: draftMessage } }\r\n}\r\n\r\nexport function saveDraft(draftMessage) {\r\n  return { type: SAVE_DRAFT, payload: { message: draftMessage } }\r\n}\r\n\r\nexport function createMessages(messages) {\r\n  return { type: PUSH_MESSAGES, payload: { messages: messages } }\r\n}\r\n\r\nexport function removeAllMessages() {\r\n  return { type: REMOVE_ALL_MESSAGES }\r\n}\r\n\r\nexport function updateMessages(messages, chatId) {\r\n  return { type: UPDATE_MESSAGES, payload: { messages: messages, chatId: chatId} }\r\n}\r\n","/*\r\n * action types\r\n */\r\n\r\nexport const ADD_CHAT = \"ADD_CHAT\"\r\nexport const REMOVE_CHAT = \"REMOVE_CHAT\"\r\n\r\n/*\r\n * action creators\r\n */\r\n\r\nexport function createChat({chatId, label}) {\r\n  return { type: ADD_CHAT, payload: { chat: { id: chatId, label: label } } }\r\n}\r\n\r\nexport function removeChat(chatId) {\r\n  return { type: REMOVE_CHAT, payload: chatId }\r\n}\r\n","/*\r\n * action types\r\n */\r\nexport const CREATE_REWIND_POINT = \"CREATE_REWIND_POINT\"\r\nexport const REMOVE_REWIND_POINT = \"REMOVE_REWIND_POINT\"\r\nexport const SELECT_REWIND_POINT = \"SELECT_REWIND_POINT\"\r\nexport const UPDATE_REWIND_POINTS = \"UPDATE_REWIND_POINTS\"\r\n\r\n/*\r\n * action creators\r\n */\r\n\r\nexport function createRewindPoint(pointName, database) {\r\n  return { type: CREATE_REWIND_POINT, payload: { name: pointName, db: database }}\r\n}\r\n\r\nexport function removeRewindPoint(pointId) {\r\n  return { type: REMOVE_REWIND_POINT, payload: { id: pointId } }\r\n}\r\n\r\nexport function selectRewindPoint(pointId) {\r\n  return { type: SELECT_REWIND_POINT, payload: { id: pointId } }\r\n}\r\n\r\nexport function updateRewindPoints(points) {\r\n  return { type: UPDATE_REWIND_POINTS, payload: { points: points } }\r\n}\r\n","// this message types will be shown in game control inject message list\r\nexport const showOnGameControl = [\r\n  \"height\", \"color\", \"weight\",\r\n]\r\n\r\n// this message type will be used on chat header add button click\r\nexport const chatAddBtnSettings = {\r\n  scheme: \"name\",\r\n  format: \"table\" //grid\r\n}\r\n","import PouchDB from 'pouchdb-browser'\r\nimport defaultOptions from './config-default.json'\r\nlet options;\r\n\r\ntry {\r\n options = require('./config-local.json')\r\n}\r\ncatch (e) {\r\n options = {}\r\n}\r\n\r\noptions = {\r\n  ...defaultOptions,\r\n  ...options\r\n}\r\n\r\nexport const dbOptions = {...options}\r\n\r\nconst getDb = (dbKey, sync, optionsManual) => {\r\n\r\n  if(!options[dbKey] && !optionsManual)\r\n    return new PouchDB(dbKey)\r\n\r\n  if(!optionsManual) optionsManual = {}\r\n\r\n  const optLoc = options[dbKey] ? {...options[dbKey], ...optionsManual} : optionsManual\r\n\r\n  const db = new PouchDB(optLoc.name || dbKey)\r\n\r\n  if(optLoc.remote && sync) {\r\n    const remoteDB = new PouchDB(optLoc.remote)\r\n\r\n    db.replicate.to(remoteDB, {\r\n      live: optLoc.live,\r\n      retry: optLoc.retry\r\n    }).on('complete', done => {\r\n      console.log('complete', done)\r\n    })\r\n\r\n    db.replicate.from(remoteDB, {\r\n      live: optLoc.live,\r\n      retry: optLoc.retry\r\n    }).on('complete', done => {\r\n      console.log('complete from', done)\r\n    })\r\n  }\r\n  return db\r\n}\r\n\r\nexport default getDb\r\n/*\r\ndb.fullySync(remoteDB, {\r\n  live: true,\r\n  retry: true\r\n}).on('change', function (info) {\r\n  // handle change\r\n}).on('paused', function () {\r\n  // replication paused (e.g. user went offline)\r\n}).on('active', function () {\r\n  // replicate resumed (e.g. user went back online)\r\n}).on('denied', function (info) {\r\n  // a document failed to replicate, e.g. due to permissions\r\n}).on('complete', function (info) {\r\n  // handle complete\r\n}).on('error', function (err) {\r\n  // handle error\r\n});\r\n*/\r\n","const defaultOptions = {\r\n  showOnGameControlCreateChats: true,\r\n  addChatIdToChatFromArray: true,\r\n  addChatIdToChatToArray: true,\r\n  preFillFrom: false\r\n}\r\n\r\nconst chats = [\r\n  {\r\n    chatId: \"red\",\r\n    label:\"Red Chat\",\r\n    options: {\r\n      ...defaultOptions\r\n    }\r\n  },\r\n  {\r\n    chatId: \"blue\",\r\n    label:\"Blue Chat\",\r\n    options: {\r\n      ...defaultOptions\r\n    }\r\n  },\r\n  {\r\n    chatId: \"white\",\r\n    label:\"White Chat\",\r\n    options: {\r\n      ...defaultOptions,\r\n      addChatIdToChatToArray: false,\r\n      preFillFrom: true\r\n    }\r\n  }\r\n]\r\n\r\nexport const getToKeys = () => {\r\n  return chats\r\n          .filter(chat => chat.options.addChatIdToChatToArray)\r\n          .map(chat => chat.chatId)\r\n}\r\nexport const getFromKeys = () => {\r\n  return chats\r\n          .filter(chat => chat.options.addChatIdToChatFromArray)\r\n          .map(chat => chat.chatId)\r\n}\r\n\r\nexport const getGameControlChats = () => {\r\n  return chats\r\n          .filter(chat => chat.options.showOnGameControlCreateChats)\r\n}\r\n\r\nexport default chats\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { CardFooter, InputGroup, Button, InputGroupAddon, Input } from 'reactstrap'\r\n\r\nconst RewindForm = ({createRewindPoint}) => {\r\n  const input = React.createRef()\r\n\r\n  const onFormSubmit = e => {\r\n    e.preventDefault()\r\n\r\n    if(input.current.value && input.current.value.length) {\r\n      createRewindPoint(input.current.value)\r\n      input.current.value = \"\"\r\n    }\r\n  }\r\n\r\n  return (\r\n    <CardFooter>\r\n      <form onSubmit={onFormSubmit}>\r\n        <InputGroup>\r\n          <Input innerRef={input} placeholder=\"New rewind point\"/>\r\n          <InputGroupAddon addonType=\"append\">\r\n            <Button color=\"warning\">Create</Button>\r\n          </InputGroupAddon>\r\n        </InputGroup>\r\n      </form>\r\n    </CardFooter>\r\n  )\r\n}\r\n\r\nRewindForm.propTypes = {\r\n  createRewindPoint: PropTypes.func.isRequired\r\n}\r\n\r\nexport default RewindForm\r\n","import { StyleSheet } from 'aphrodite'\r\n\r\nexport default StyleSheet.create({\r\n  main: {\r\n    padding: '15px 0'\r\n  },\r\n  hide: {\r\n    display: 'none',\r\n  },\r\n  createMessage: {\r\n    display: 'none',\r\n  },\r\n  createMessageShow: {\r\n    display: 'block',\r\n  }\r\n})\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {CardBody, ListGroup, ListGroupItem } from 'reactstrap'\r\n\r\nimport { css } from 'aphrodite/no-important'\r\nimport styles from './styles'\r\n\r\nconst RewindList = ({ rewinds, removeRewindPoint, selectRewindPoint }) => {\r\n\r\n  return (\r\n    <CardBody className={css(!rewinds.length && styles.hide)}>\r\n      <p>Rewind Points:</p>\r\n      <ListGroup>\r\n        {rewinds.map(({doc}, key) => (\r\n          <ListGroupItem\r\n            key={key}\r\n            tag=\"button\"\r\n            active={doc.active}\r\n            onClick={() => {selectRewindPoint(doc._id)}}\r\n          >\r\n            {doc.name}\r\n          </ListGroupItem>\r\n        ))}\r\n      </ListGroup>\r\n    </CardBody>\r\n  )\r\n}\r\n\r\nRewindList.propTypes = {\r\n  removeRewindPoint: PropTypes.func.isRequired,\r\n  selectRewindPoint: PropTypes.func.isRequired,\r\n  rewinds: PropTypes.array.isRequired\r\n}\r\n\r\nexport default RewindList\r\n","import { connect } from 'react-redux'\r\nimport RewindList from '../components/control/rewindList'\r\nimport { removeRewindPoint, selectRewindPoint } from '../actions/rewindPoints'\r\n\r\nconst mapStateToProps = (state) => ({\r\n  rewinds: state.rewindPoints.points,\r\n  active: state.rewindPoints.activeRewind,\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  removeRewindPoint: (id) => {\r\n    dispatch(removeRewindPoint(id))\r\n  },\r\n  selectRewindPoint: (id) => {\r\n    dispatch(selectRewindPoint(id))\r\n  },\r\n})\r\n\r\nconst RewindsContainer = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(RewindList)\r\n\r\nexport default RewindsContainer\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Row, Col, Card, CardHeader, CardBody, CardFooter, Button, ListGroup, ListGroupItem } from 'reactstrap'\r\nimport JSONEditor from '@json-editor/json-editor'\r\nimport loremIpsum from 'lorem-ipsum'\r\nimport { getGameControlChats } from '../../defaults/allowedChats'\r\nimport RewindForm from './rewindForm'\r\nimport RewindList from '../../containers/rewinds'\r\n\r\nimport { css } from 'aphrodite/no-important'\r\nimport styles from './styles'\r\n\r\nclass ChatControll extends Component {\r\n  constructor(props, content) {\r\n    super(props, content)\r\n\r\n    this.newMessageForm = this.newMessageForm.bind(this)\r\n    this.closeMessageForm = this.closeMessageForm.bind(this)\r\n    this.injectForm = this.injectForm.bind(this)\r\n    this.generateMessages = this.generateMessages.bind(this)\r\n    this.editor = null\r\n    this.editorRef = React.createRef()\r\n\r\n    this.state = {\r\n      activeSchema: null,\r\n      createChats: getGameControlChats()\r\n    }\r\n  }\r\n\r\n  generateMessages(count) {\r\n    this.props.createMessages(Array.apply(null, Array(count)).map(() => {\r\n      const messageType = this.props.messageTypes[Math.floor(Math.random()*this.props.messageTypes.length)]\r\n      return messageType.required.reduce((map, field) => {\r\n\r\n        map.type = messageType.scheme\r\n        let value = \"\"\r\n        const enumArr = messageType.properties[field].enum\r\n        if(Array.isArray(enumArr) && enumArr.length) {\r\n          value = enumArr[Math.floor(Math.random()*enumArr.length)]\r\n        }\r\n        else if(messageType.properties[field].format === \"color\") {\r\n          value = '#'+Math.floor(Math.random()*16777215).toString(16)\r\n        }\r\n        else {\r\n          switch (messageType.properties[field].type) {\r\n            case \"integer\":\r\n              value = Math.floor(Math.random()*999)\r\n              break;\r\n            case \"string\":\r\n              value = loremIpsum({count: 1})\r\n              break;\r\n            default:\r\n              value = messageType.properties[field].default || loremIpsum({count: 1})\r\n          }\r\n        }\r\n\r\n        map[field] = value\r\n        return map\r\n      }, {})\r\n    }));\r\n  }\r\n\r\n  newMessageForm(e) {\r\n    if(this.state.activeSchema !== e.target.name) {\r\n      if(this.editor)\r\n        this.editor.destroy()\r\n\r\n      this.setState({activeSchema: e.target.name})\r\n      let schema = this.props.messageTypes[e.target.name]\r\n      schema.properties.from.enum = schema.properties.from.enum.sort((x, y) => (x === \"white\" ? -1 : y === \"white\" ? 1 : 0))\r\n\r\n      this.editor = new JSONEditor(this.editorRef.current, {\r\n        schema: schema,\r\n        theme: 'bootstrap4'\r\n      })\r\n    }\r\n    else\r\n      this.closeMessageForm()\r\n  }\r\n\r\n  closeMessageForm() {\r\n    this.editor.destroy()\r\n    this.setState({activeSchema: null})\r\n  }\r\n\r\n  injectForm() {\r\n    if(!(this.editor.validate()).length) {\r\n      this.props.createMessages([{...this.editor.getValue(), type: this.editor.schema.scheme}])\r\n      this.closeMessageForm()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={css(styles.main)}>\r\n        <Row className=\"main\">\r\n          <Col md={4}>\r\n            <Card>\r\n              <CardHeader>Game Control</CardHeader>\r\n              <CardBody>\r\n                <p>Inject Messages:</p>\r\n                <ListGroup>\r\n                  {this.props.messageTypes.map((schema, key) => (\r\n                    <ListGroupItem\r\n                      key={key}\r\n                      tag=\"button\"\r\n                      active={key === parseInt(this.state.activeSchema)}\r\n                      onClick={this.newMessageForm}\r\n                      name={key}\r\n                    >\r\n                      {schema.title}\r\n                    </ListGroupItem>\r\n                  ))}\r\n                </ListGroup>\r\n              </CardBody>\r\n              {(!!this.state.createChats.length) && <CardBody>\r\n                <p>Create chats:</p>\r\n                <ListGroup>\r\n                  {this.state.createChats.map((chat, key) => {\r\n                    const active = this.props.chats.includes(chat.chatId)\r\n                    return (\r\n                      <ListGroupItem\r\n                        key={key}\r\n                        tag=\"button\"\r\n                        active={active}\r\n                        onClick={() => {\r\n                          if (active)\r\n                            this.props.removeChat(chat.chatId)\r\n                          else\r\n                            this.props.createChat(chat)\r\n                        }}\r\n                      >\r\n                        {chat.label}\r\n                      </ListGroupItem>\r\n                    )\r\n                  })}\r\n                </ListGroup>\r\n              </CardBody>}\r\n              <RewindForm createRewindPoint={this.props.createRewindPoint}/>\r\n              <RewindList/>\r\n              <CardFooter>\r\n                <Button block color=\"success\" onClick={() => {this.generateMessages(50)}}>Generate 50 Messages</Button>\r\n                <Button block color=\"success\" onClick={() => {this.generateMessages(100)}}>Generate 100 Messages</Button>\r\n                <Button block color=\"success\" onClick={() => {this.generateMessages(1000)}}>Generate 1000 Messages</Button>\r\n              </CardFooter>\r\n              <CardFooter>\r\n                <Button block color=\"primary\" href=\"/export\">Export Messages</Button>\r\n              </CardFooter>\r\n              <CardFooter>\r\n                <Button block color=\"danger\" onClick={this.props.clearMessages}>Clear Messages</Button>\r\n              </CardFooter>\r\n            </Card>\r\n          </Col>\r\n          <Col md={8}>\r\n            <div className={css(styles.createMessage, this.state.activeSchema && styles.createMessageShow)}>\r\n              <Card>\r\n                <CardBody>\r\n                  <div ref={this.editorRef}/>\r\n                </CardBody>\r\n                <CardFooter>\r\n                  <Button color=\"success\" onClick={this.injectForm}>Inject</Button>\r\n                </CardFooter>\r\n              </Card>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nChatControll.propTypes = {\r\n  messageTypes: PropTypes.array,\r\n  clearMessages: PropTypes.func.isRequired,\r\n  createRewindPoint: PropTypes.func.isRequired,\r\n  createMessages: PropTypes.func.isRequired,\r\n  createChat: PropTypes.func.isRequired,\r\n  removeChat: PropTypes.func.isRequired,\r\n  chats: PropTypes.array,\r\n}\r\n\r\nexport default ChatControll\r\n","import { connect } from 'react-redux'\r\nimport { createMessages, removeAllMessages } from '../actions/messages'\r\nimport { createChat, removeChat } from '../actions/chats'\r\nimport { createRewindPoint } from '../actions/rewindPoints'\r\nimport { showOnGameControl } from '../defaults/messageTypesKeys'\r\n\r\nimport Control from '../components/control'\r\n\r\nconst mapStateToProps = state => ({\r\n  messageTypes: state.messageTypes.filter(type => (showOnGameControl.includes(type.scheme))),\r\n  chats: state.chats.map((chat) => chat && chat.id)\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\r\n  return {\r\n    createMessages: (messages) => {\r\n      dispatch(createMessages(messages))\r\n    },\r\n    clearMessages: () => {\r\n      dispatch(removeAllMessages())\r\n    },\r\n    createChat: (chat) => {\r\n      dispatch(createChat(chat))\r\n    },\r\n    removeChat: (id) => {\r\n      dispatch(removeChat(id))\r\n    },\r\n    createRewindPoint: (pointName) => {\r\n      dispatch(createRewindPoint(pointName, 'messages'))\r\n    },\r\n  }\r\n}\r\n\r\nconst ControlContainer = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Control)\r\n\r\nexport default ControlContainer\r\n","import { StyleSheet } from 'aphrodite'\r\n\r\nexport default StyleSheet.create({\r\n  chatItem: {\r\n    paddingBottom: '15px'\r\n  },\r\n})\r\n","import { StyleSheet } from 'aphrodite/no-important'\r\n\r\nexport default StyleSheet.create({\r\n  main: {\r\n    height: '320px',\r\n    position: 'relative',\r\n    paddingTop: '0.1px',\r\n    \":after\": {\r\n      content: '\"\"',\r\n      display: 'block',\r\n      position: 'absolute',\r\n      width: \"100%\",\r\n      height: '20px',\r\n      top: '100%',\r\n      background: \"linear-gradient(to bottom, rgba(255,255,255,0) 0%,rgba(255,255,255,1) 100%)\",\r\n      left: '0',\r\n    },\r\n    \":before\": {\r\n      content: '\"\"',\r\n      display: 'block',\r\n      position: 'absolute',\r\n      width: \"100%\",\r\n      height: '20px',\r\n      bottom: '100%',\r\n      left: '0',\r\n      zIndex: '2',\r\n      background: \"linear-gradient(to bottom, rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%)\",\r\n    }\r\n  },\r\n  container: {\r\n    position: 'absolute',\r\n    maxHeight: '100%',\r\n    height: 'auto',\r\n    left: '0',\r\n    bottom: '0',\r\n    width: '100%'\r\n  },\r\n  item: {\r\n    display: 'inline-block',\r\n    verticalAligin: 'top',\r\n    maxWidth: \"100%\",\r\n  },\r\n  scrolContent: {\r\n    padding: '20px'\r\n  },\r\n  badge: {\r\n    maxWidth: \"100%\",\r\n    fontSize: '16px',\r\n    lineHeight: '20px',\r\n    padding: '5px 15px',\r\n    borderRadius: '15px 0 15px 15px',\r\n    position: 'relative',\r\n    overflow: 'hidden',\r\n    display: 'inline-block',\r\n    verticalAligin: 'top',\r\n    opacity: '0.9',\r\n    color: '#fff',\r\n    ':hover': {\r\n      opacity: '1'\r\n    }\r\n  },\r\n  badgeLeft: {\r\n    borderRadius: '0 15px 15px 15px',\r\n  },\r\n  badgeBg: {\r\n    opacity: '0.8',\r\n    position: 'absolute',\r\n    left: '0',\r\n    bottom: '0',\r\n    height: '100%',\r\n    width: '100%'\r\n  },\r\n  message: {\r\n    position: 'relative'\r\n  },\r\n  scrollbar: {\r\n    boxSizing: 'content-box',\r\n    width: '100%',\r\n    padding: '20px',\r\n    margin: '-20px 0 0 -20px',\r\n    position: 'relative',\r\n    height: '100%'\r\n  }\r\n})\r\n","export const bg = {\r\n  blue: \"bg-primary\",\r\n  gray: \"bg-secondary\",\r\n  green: \"bg-success\",\r\n  red: \"bg-danger\",\r\n  yellow: \"bg-warning\",\r\n  black: \"bg-dark\",\r\n  white: \"bg-white\",\r\n  lightBlue: \"bg-info\",\r\n  lightGray: \"bg-light\",\r\n  lightBlack: \"bg-muted\",\r\n}\r\n\r\nexport const buttons = {\r\n  transparent: \"link\",\r\n  blue: \"primary\",\r\n  gray: \"secondary\",\r\n  green: \"success\",\r\n  red: \"danger\",\r\n  yellow: \"warning\",\r\n  lightBlue: \"info\",\r\n}\r\n\r\nexport const text = {\r\n  blue: \"text-primary\",\r\n  gray: \"text-secondary\",\r\n  green: \"text-success\",\r\n  red: \"text-danger\",\r\n  yellow: \"text-warning\",\r\n  black: \"text-dark\",\r\n  white: \"text-white\",\r\n  lightBlue: \"text-info\",\r\n  lightGray: \"text-light\",\r\n  lightBlack: \"text-muted\",\r\n}\r\n\r\nconst theme = {\r\n  bg: bg,\r\n  buttons: buttons,\r\n  text: text\r\n}\r\n\r\nexport default theme\r\n","class ColorScheme {\r\n\r\n  constructor(id) {\r\n    this.itemId = id\r\n    this.items = {}\r\n    this.itemDefault = {}\r\n    this.global = {}\r\n  }\r\n\r\n  getGlobalScheme() {\r\n    return this.global\r\n  }\r\n\r\n  getItemScheme() {\r\n    return {\r\n      ...this.itemDefault,\r\n      ...(this.items[this.itemId] || {})\r\n    }\r\n  }\r\n\r\n  getScheme() {\r\n    return {\r\n      item: this.getItemScheme(),\r\n      global: this.getGlobalScheme(),\r\n    }\r\n  }\r\n}\r\n\r\nexport default ColorScheme\r\n","import { bg, text } from './theme'\r\nimport ColorScheme from './scheme'\r\n\r\nclass MessageScheme extends ColorScheme {\r\n\r\n  constructor(chatId) {\r\n    super(chatId)\r\n\r\n    this.items = {\r\n      red: {\r\n        bg: bg.red,\r\n      },\r\n      blue: {\r\n        bg: bg.blue,\r\n      }\r\n    }\r\n\r\n    this.itemDefault = {\r\n      bg: bg.gray,\r\n      text: text.white,\r\n    }\r\n  }\r\n}\r\n\r\nexport default MessageScheme\r\n","import React, { Component, createRef } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { css } from 'aphrodite/no-important'\r\nimport styles from './styles'\r\nimport PerfectScrollbar from 'react-perfect-scrollbar'\r\nimport MessageColorScheme from '../../../defaults/schemeColors/messageScheme'\r\nimport classNames from 'classnames/bind'\r\n\r\nclass ChatMessages extends Component {\r\n  constructor(props, content) {\r\n    super(props, content)\r\n\r\n    this.timeId = null\r\n    this.loadTimeId = null\r\n    this.loading = false\r\n    this.scrolledDown = true\r\n    this.scrollbar = createRef()\r\n    this.loadMoreCount = 10\r\n\r\n    this.getScrollHeight = this.getScrollHeight.bind(this)\r\n    this.onScrollUp = this.onScrollUp.bind(this)\r\n    this.onYReachStart = this.onYReachStart.bind(this)\r\n    this.onYReachEnd = this.onYReachEnd.bind(this)\r\n    this.scrollToDown = this.scrollToDown.bind(this)\r\n    this.firstScrolled = false\r\n\r\n    this.state = {\r\n      showItemsCount: 10,\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearTimeout(this.loadTimeId)\r\n  }\r\n\r\n  onScrollUp() {\r\n    this.scrolledDown = false\r\n  }\r\n\r\n  onYReachEnd() {\r\n    this.scrolledDown = true\r\n  }\r\n\r\n  onYReachStart() {\r\n\r\n    if(this.loadTimeId)\r\n      clearTimeout(this.loadTimeId)\r\n\r\n    this.loadTimeId = setTimeout(() => {\r\n      const currentHeigth = this.getScrollHeight()\r\n      if(!this.scrolledDown && !this.loading) {\r\n        this.loading = true\r\n        this.setState({showItemsCount: this.state.showItemsCount + this.loadMoreCount})\r\n        setTimeout(() => {\r\n          if(this.scrollbar.current)\r\n            this.scrollbar.current._container.scrollTop = this.getScrollHeight() - currentHeigth\r\n          this.loading = false\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  getScrollHeight() {\r\n    return this.scrollbar.current ? this.scrollbar.current._container.scrollHeight : 0\r\n  }\r\n\r\n  scrollToDown() {\r\n    if(this.timeId)\r\n      clearTimeout(this.timeId)\r\n\r\n    this.timeId = setTimeout(() => {\r\n      if(this.scrollbar.current) {\r\n        this.scrollbar.current._container.scrollTop = this.getScrollHeight()\r\n        this.firstScrolled = true\r\n      }\r\n      else {\r\n        if(!this.firstScrolled) {\r\n          this.timeId = setTimeout(() => {\r\n            this.scrollToDown()\r\n          }, 512)\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  componentWillReceiveProps(props) {\r\n    if(this.props.messages.length !== 0 && props.messages.length > this.state.showItemsCount && this.props.messages.length < props.messages.length) {\r\n      let newItemsCount = props.messages.length - this.props.messages.length\r\n      this.setState({showItemsCount: this.state.showItemsCount + (newItemsCount > this.loadMoreCount ? this.loadMoreCount : newItemsCount) })\r\n    }\r\n\r\n    this.scrollToDown()\r\n  }\r\n\r\n  renderItem(message) {\r\n    if(!message) return \"\"\r\n    const fromChat = message.from === this.props.chatId\r\n    const colorScheme = (new MessageColorScheme(message.from)).getItemScheme()\r\n    let itemStyles = {}\r\n\r\n    if(fromChat) {\r\n      itemStyles = { textAlign: 'right' }\r\n    }\r\n\r\n    return(\r\n      <div style={itemStyles}>\r\n        <div className={css(styles.item)}>\r\n          <div className={css(styles.badge, (!fromChat) && styles.badgeLeft)}>\r\n            <div className={classNames(css(styles.badgeBg), colorScheme.bg)}/>\r\n            <div className={classNames(css(styles.message), colorScheme.text)}>\r\n              {Object.keys(message).map(key => (key.charAt(0) !== '_' && message[key] && <div key={key}><strong>{key}:</strong> {message[key]}</div>))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={css(styles.main)}>\r\n        <div className={css(styles.scrollbar)}>\r\n          <PerfectScrollbar\r\n            ref={this.scrollbar}\r\n            onYReachEnd={this.onYReachEnd}\r\n            onScrollUp={this.onScrollUp}\r\n            onYReachStart={this.onYReachStart}\r\n            suppressScrollX={true}\r\n            className={css(styles.container)}\r\n            contentClassName={css(styles.scrolContent)}\r\n          >\r\n            <div className={css(styles.scrolContent)}>\r\n              {this.props.messages.slice(Math.max(this.props.messages.length - this.state.showItemsCount, 0)).map((msg, key) => (\r\n                <div key={key}>{this.renderItem(msg.doc)}</div>\r\n              ))}\r\n            </div>\r\n          </PerfectScrollbar>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nChatMessages.propTypes = {\r\n  messages: PropTypes.array.isRequired,\r\n  chatId: PropTypes.string.isRequired\r\n}\r\n\r\nexport default ChatMessages\r\n","import { connect } from 'react-redux'\r\nimport Messages from '../components/chat/messages'\r\n\r\nconst mapStateToProps = (state, { chatId }) => {\r\n  return {\r\n    messages: (state.messages && Array.isArray(state.messages[chatId])) ? state.messages[chatId] : [],\r\n    chatId: chatId\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {}\r\n}\r\n\r\nconst MessagesContainer = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Messages)\r\n\r\nexport default MessagesContainer\r\n","import { bg, buttons, text } from './theme'\r\nimport ColorScheme from './scheme'\r\nimport cn from 'classnames'\r\n\r\nclass ChatScheme extends ColorScheme {\r\n\r\n  constructor(chatId) {\r\n    super(chatId)\r\n\r\n    this.items = {\r\n      red: {\r\n        bg: bg.red,\r\n        text: text.white\r\n      },\r\n      blue: {\r\n        bg: bg.blue,\r\n        text: text.white\r\n      }\r\n    }\r\n\r\n    this.itemDefault = {\r\n      bg: bg.lightGray,\r\n      text: text.black,\r\n      btn: buttons.gray\r\n    }\r\n\r\n    this.global = {\r\n      body: bg.white,\r\n      footer: bg.light,\r\n      tab: bg.white,\r\n      activeTab: cn(bg.blue, text.white),\r\n    }\r\n  }\r\n}\r\n\r\nexport default ChatScheme\r\n","import chats from '../defaults/allowedChats'\r\n\r\n// declare the messages views\r\nlet messages = {}\r\nchats.forEach(({chatId}) => {\r\n  messages[chatId] = {\r\n    map: `function (doc) { if(doc.to === \"${chatId}\" && doc.draft === false || doc.from === \"${chatId}\") emit(doc.id); }`\r\n  }\r\n})\r\n\r\n// declare the views\r\nexport const views = {\r\n  messages: messages\r\n}\r\n\r\n// query couchdb views\r\nexport const query = (db, view, params) => {\r\n  const namespace = view.split('/')[0]\r\n\r\n  return db.query(view, params).catch(err => {\r\n    if (!views[namespace]) throw new Error('View ' + namespace + ' is not defined.')\r\n\r\n    // if view doesn't exist, create it, and try again\r\n    if (err.status === 404) {\r\n      return db.put({\r\n        _id: '_design/' + namespace,\r\n        views: views[namespace]\r\n      }).then(() => (query(db, view, params)))\r\n    }\r\n  })\r\n}\r\n\r\nexport default views\r\n","import chats from '../defaults/allowedChats'\r\n/* pouchdb filter management\r\n */\r\n\r\n // declare the messages filters\r\nlet messages = {\r\n  cloneFilter: 'function (doc) { return !doc._deleted; }'\r\n}\r\nchats.forEach(({chatId}) => {\r\n  messages[chatId] = `function (doc) { return doc.to === \"${chatId}\" && doc.draft === false || doc.from === \"${chatId}\"; }`\r\n})\r\n\r\n// declare the filters\r\nexport const filters = {\r\n  messages: messages\r\n}\r\n\r\nexport const prefix = 'filter'\r\n\r\n// query couchdb filters\r\nexport const changes = (db, filter, params) => {\r\n  return db.changes({\r\n    since: 'now',\r\n    live: true,\r\n    include_docs: true,\r\n    filter: prefix + filter\r\n  })\r\n}\r\n\r\nexport default filters\r\n","import { StyleSheet } from 'aphrodite/no-important'\r\n\r\nexport default StyleSheet.create({\r\n  label: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    right: 0,\r\n  },\r\n  labelContainer: {\r\n    position: 'relative',\r\n    width: '100%'\r\n  },\r\n  labelButton: {\r\n    paddingRight: '0 !important',\r\n    paddingLeft: '0 !important'\r\n  }\r\n})\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport { CardHeader, Button } from 'reactstrap'\r\nimport { css } from 'aphrodite/no-important'\r\nimport styles from './styles'\r\n\r\nconst ChatHeader = ({ colorScheme, button, children, chatId, defaultMessageType, createDraft }) => {\r\n\r\n  const headerButtonOnClick = () => {\r\n    let message = {}\r\n    \r\n    defaultMessageType.required.forEach(field => {\r\n      let value = \"\"\r\n\r\n      const enumArr = defaultMessageType.properties[field].enum;\r\n\r\n      if(Array.isArray(enumArr) && enumArr.length) {\r\n        if(field === 'from' && enumArr.includes(chatId))\r\n          value = chatId\r\n        else if(defaultMessageType.properties[field].default)\r\n          value = defaultMessageType.properties[field].default\r\n        else\r\n          value = enumArr[0]\r\n      }\r\n      else if(defaultMessageType.properties[field].default) {\r\n        value = defaultMessageType.properties[field].default\r\n      }\r\n\r\n      message[field] = value\r\n    })\r\n\r\n    createDraft(message)\r\n  }\r\n\r\n  return (\r\n    <CardHeader className={colorScheme.item.bg}>\r\n      <div className={css(styles.labelContainer)}>\r\n        <div className={css(styles.label)}>\r\n          <Button color=\"link\" className={css(styles.labelButton)}>\r\n            <strong className={colorScheme.item.text}>{children}</strong>\r\n          </Button>\r\n        </div>\r\n      </div>\r\n      {button && defaultMessageType && <Button color={colorScheme.item.btn} onClick={headerButtonOnClick}>{button}</Button>}\r\n    </CardHeader>\r\n  )\r\n}\r\n\r\nChatHeader.propTypes = {\r\n  createDraft: PropTypes.func.isRequired,\r\n  colorScheme: PropTypes.object.isRequired,\r\n  defaultMessageType: PropTypes.object.isRequired,\r\n  chatId: PropTypes.string.isRequired,\r\n  children: PropTypes.string,\r\n  button: PropTypes.string\r\n}\r\n\r\nChatHeader.defaultValues = {\r\n  button: \"\",\r\n  children: \"\"\r\n}\r\n\r\nexport default ChatHeader\r\n","import { connect } from 'react-redux'\r\nimport Header from '../../components/chat/header'\r\nimport { saveDraft } from '../../actions/messages'\r\nimport { chatAddBtnSettings } from '../../defaults/messageTypesKeys'\r\n\r\nconst mapStateToProps = (state) => ({\r\n  defaultMessageType: state.messageTypes.find(type => (type.scheme === chatAddBtnSettings.scheme))\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\r\n  return {\r\n    createDraft: (message) => {\r\n      dispatch(saveDraft(message))\r\n    }\r\n  }\r\n}\r\n\r\nconst HeaderContainer = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Header)\r\n\r\nexport default HeaderContainer\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Button } from 'reactstrap'\r\nimport JSONEditor from '@json-editor/json-editor'\r\n\r\nclass ChatForm extends Component {\r\n  constructor(props, content) {\r\n    super(props, content)\r\n\r\n    this.initForm = this.initForm.bind(this)\r\n    this.submitForm = this.submitForm.bind(this)\r\n    this.getFormFilteredData = this.getFormFilteredData.bind(this)\r\n\r\n    this.editor = null\r\n    this.editorBox = React.createRef()\r\n    this.hiddenAutofillKeys =  [\"draft\", \"_id\", \"_rev\", \"from\", \"test\"]\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initForm()\r\n  }\r\n\r\n  componentWillReceiveProps(props) {\r\n    if(this.editor)\r\n      this.editor.setValue(this.getFormFilteredData(props.form, props.message).values)\r\n  }\r\n\r\n  getFormFilteredData(form, message) {\r\n    let formFiltered = {\r\n      ...form,\r\n      required: [\"_id\", ...form.required],\r\n      properties: {...form.properties}\r\n    }\r\n    let messageFiltered = {...message}\r\n\r\n    this.hiddenAutofillKeys.forEach(key => {\r\n      const requiredKey = formFiltered.required.indexOf(key)\r\n      if(requiredKey > -1)\r\n        formFiltered.required.splice(requiredKey, 1)\r\n\r\n      if(formFiltered.properties[key])\r\n        delete formFiltered.properties[key]\r\n\r\n      if(messageFiltered[key])\r\n        delete messageFiltered[key]\r\n    })\r\n\r\n    return {\r\n      form: formFiltered,\r\n      values: messageFiltered\r\n    }\r\n  }\r\n\r\n  initForm() {\r\n    const formData = this.getFormFilteredData(this.props.form, this.props.message)\r\n\r\n    this.editor = new JSONEditor(this.editorBox.current, {\r\n      schema: formData.form,\r\n      theme: 'bootstrap4'\r\n    }).setValue(formData.values)\r\n\r\n    for(let key in this.editor.editors) {\r\n      if(this.editor.editors.hasOwnProperty(key) && key !== 'root') {\r\n        this.editor.watch(key, data => {\r\n          this.props.saveDraft({\r\n            ...this.props.message,\r\n            ...this.editor.getValue(),\r\n            [key.replace('root.', '')]: this.editor.getEditor(key).getValue()\r\n          })\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  submitForm() {\r\n    if(!this.editor.validate().length)\r\n      this.props.sendDraftMessage({\r\n        type: this.editor.schema.scheme,\r\n        ...this.props.message,\r\n        ...this.editor.getValue(),\r\n      })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"messageEdit\">\r\n        <div ref={this.editorBox}/>\r\n        <Button onClick={this.submitForm}>{this.props.button}</Button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nChatForm.propTypes = {\r\n  button: PropTypes.string.isRequired,\r\n  form: PropTypes.object.isRequired,\r\n  message: PropTypes.object.isRequired,\r\n  sendDraftMessage: PropTypes.func.isRequired,\r\n  saveDraft: PropTypes.func.isRequired,\r\n}\r\n\r\nexport default ChatForm\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n  CardFooter,\r\n  Dropdown,\r\n  DropdownToggle,\r\n  DropdownMenu,\r\n  DropdownItem,\r\n  Nav,\r\n  NavItem,\r\n  NavLink,\r\n  TabContent,\r\n  TabPane\r\n} from 'reactstrap'\r\nimport DraftForm from './form'\r\n\r\n\r\nclass ChatFooter extends Component {\r\n\r\n  constructor(props, content) {\r\n    super(props,content)\r\n\r\n    this.renderDropdown = this.renderDropdown.bind(this)\r\n    this.toggle = this.toggle.bind(this)\r\n    this.toggleDropdown = this.toggleDropdown.bind(this)\r\n    this.renderTabs = this.renderTabs.bind(this)\r\n\r\n    this.showDropdownAfter = 3\r\n\r\n    this.state = {\r\n      activeDraft: props.messages.length - 1,\r\n      dropdownOpen: false\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(props) {\r\n    if(this.props.messages.length !== props.messages.length)\r\n      this.toggle(props.messages.length - 1)\r\n  }\r\n\r\n  toggle(key) {\r\n    this.setState({\r\n      activeDraft: key,\r\n    })\r\n  }\r\n\r\n  toggleDropdown() {\r\n    this.setState({\r\n      dropdownOpen: !this.state.dropdownOpen\r\n    })\r\n  }\r\n\r\n  renderDropdown() {\r\n    return (\r\n      <Dropdown isOpen={this.state.dropdownOpen} toggle={this.toggleDropdown}>\r\n        <DropdownToggle caret className={this.props.colorScheme.global.activeTab}>\r\n          {this.props.messages[this.state.activeDraft].doc.title || `Draft ${this.state.activeDraft}`}\r\n        </DropdownToggle>\r\n        <DropdownMenu right>\r\n          {this.props.messages.map((data, key) => (\r\n            <DropdownItem\r\n              key={key}\r\n              className={this.state.activeDraft === key ? this.props.colorScheme.global.activeTab : \"\"}\r\n              onClick={() => { this.toggle(key)} }\r\n            >\r\n              {data.doc.title || `Draft ${key}`}\r\n            </DropdownItem>\r\n          ))}\r\n        </DropdownMenu>\r\n      </Dropdown>\r\n    )\r\n  }\r\n\r\n  renderTabs() {\r\n    if(this.props.messages.length < 2)\r\n      return <div/>\r\n\r\n    return (\r\n      <Nav tabs>\r\n        {this.props.messages.map((data, key) => (\r\n          <NavItem key={key}>\r\n            <NavLink\r\n              className={this.state.activeDraft === key ?\r\n                this.props.colorScheme.global.activeTab :\r\n                this.props.colorScheme.global.tab\r\n              }\r\n              onClick={() => { this.toggle(key)} }\r\n            >\r\n              {data.doc.title ? data.doc.title : `Draft ${key + 1}`}\r\n            </NavLink>\r\n          </NavItem>\r\n        ))}\r\n      </Nav>\r\n    )\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <CardFooter className={this.props.colorScheme.global.footer}>\r\n        {this.props.messages.length > 0 && <TabContent activeTab={this.state.activeDraft + \"\"}>\r\n          {this.props.messages.length > this.showDropdownAfter ? this.renderDropdown() : this.renderTabs()}\r\n          {this.props.messages.map((data, key) => (\r\n            <TabPane key={key} tabId={key+\"\"}>\r\n              <DraftForm\r\n                message={data.doc}\r\n                button={this.props.button}\r\n                form={this.props.form}\r\n                saveDraft={this.props.saveDraft}\r\n                sendDraftMessage={this.props.sendDraftMessage}\r\n              />\r\n            </TabPane>\r\n          ))}\r\n        </TabContent >}\r\n      </CardFooter>\r\n    )\r\n  }\r\n}\r\n\r\nChatFooter.propTypes = {\r\n  saveDraft: PropTypes.func.isRequired,\r\n  sendDraftMessage: PropTypes.func.isRequired,\r\n  colorScheme: PropTypes.object.isRequired,\r\n  chatId: PropTypes.string.isRequired,\r\n  button: PropTypes.string.isRequired,\r\n  form: PropTypes.object.isRequired,\r\n  messages: PropTypes.array.isRequired,\r\n}\r\n\r\nexport default ChatFooter\r\n","import { connect } from 'react-redux'\r\nimport Footer from '../../components/chat/footer'\r\nimport { sendDraftMessage, saveDraft } from '../../actions/messages'\r\nimport { chatAddBtnSettings } from '../../defaults/messageTypesKeys'\r\n\r\n\r\nconst mapStateToProps = (state, {chatId}) => ({\r\n  messages: (state.messages && Array.isArray(state.messages[chatId])) ? state.messages[chatId].filter(msg => msg.doc.draft) : [],\r\n  form: {\r\n    ...state.messageTypes.find(type => (type.scheme === chatAddBtnSettings.scheme)),\r\n    format: chatAddBtnSettings.format\r\n  }\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\r\n  return {\r\n    sendDraftMessage: (message) => {\r\n      dispatch(sendDraftMessage(message))\r\n    },\r\n    saveDraft: (message) => {\r\n      dispatch(saveDraft(message))\r\n    }\r\n  }\r\n}\r\n\r\nconst FooterContainer = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Footer)\r\n\r\nexport default FooterContainer\r\n","import React, { Component } from 'react'\r\nimport { Card, CardBody } from 'reactstrap'\r\nimport PropTypes from 'prop-types'\r\nimport Messages from '../../containers/messages'\r\nimport ChatColorScheme from '../../defaults/schemeColors/chatScheme'\r\nimport getDb from '../../databases'\r\nimport { query } from '../../databases/views'\r\nimport { changes, prefix } from '../../databases/filters'\r\nimport { dbOptions } from '../../databases'\r\n\r\nimport Header from '../../containers/chat/header'\r\nimport Footer from '../../containers/chat/footer'\r\n\r\nclass Chat extends Component {\r\n  constructor(props, content) {\r\n    super(props, content)\r\n    this.changeTimer = null\r\n    this.changeTime = 128\r\n    this.updateState = this.updateState.bind(this)\r\n    this.initDatabase = this.initDatabase.bind(this)\r\n    this.dbName = 'messages'\r\n    this.db = null\r\n    this.changes = null\r\n\r\n    this.state = {\r\n      colorScheme: (new ChatColorScheme(props.chatId)).getScheme()\r\n    }\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.initDatabase(this.props.chatId, this.props.activeRewind)\r\n  }\r\n\r\n  componentWillReceiveProps(props) {\r\n    this.initDatabase(props.chatId, props.activeRewind)\r\n  }\r\n\r\n  initDatabase(chatId, activeRewind) {\r\n    const isActiveRewind = activeRewind && activeRewind.doc.local !== this.dbName\r\n    let newDb = !this.db\r\n    if(this.props.chatId !== chatId || isActiveRewind || newDb || (this.props.activeRewind && !activeRewind)) {\r\n      if(this.changes) this.changes.cancel()\r\n\r\n      if(isActiveRewind) {\r\n        this.dbName = activeRewind.doc.local\r\n        this.db = getDb(this.dbName, false, {\r\n          ...dbOptions.messages,\r\n          name: activeRewind.doc.local,\r\n          remote: dbOptions.messages.remote ? dbOptions.messages.remote.replace(\"messages\", this.dbName) : null\r\n        })\r\n        newDb = true\r\n      }\r\n      else {\r\n        if(newDb || this.dbName !== 'messages') {\r\n          newDb = true\r\n          this.dbName = 'messages'\r\n          this.db = getDb(this.dbName)\r\n        }\r\n      }\r\n\r\n      if(newDb) {\r\n        this.updateState()\r\n      }\r\n\r\n      this.changes = changes(this.db, 'messages/' + chatId).on('change', () => {\r\n        this.updateState()\r\n      })\r\n      this.setState({colorScheme: (new ChatColorScheme(chatId)).getScheme()})\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.changes.cancel()\r\n    clearTimeout(this.changeTimer)\r\n  }\r\n\r\n  updateState = (f) => {\r\n    if(this.changeTimer) clearTimeout(this.changeTimer)\r\n    this.changeTimer = setTimeout(() => {\r\n      console.log(this.db);\r\n      query(this.db, 'messages/' + this.props.chatId, {\r\n        include_docs: true,\r\n        filter: prefix + 'messages/' + this.props.chatId\r\n      }).then(({rows}) => {\r\n        console.log(rows);\r\n        this.props.updateMessages(rows || [], this.props.chatId)\r\n        if(typeof f === 'function') f()\r\n      })\r\n    }, this.changeTime)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Card>\r\n        <Header colorScheme={this.state.colorScheme} button=\"Add >>\" chatId={this.props.chatId}>{this.props.label}</Header>\r\n        <CardBody className={this.state.colorScheme.global.body}>\r\n          <Messages chatId={this.props.chatId}/>\r\n        </CardBody>\r\n        <Footer colorScheme={this.state.colorScheme} button=\"Send\" chatId={this.props.chatId}/>\r\n      </Card>\r\n    )\r\n  }\r\n}\r\n\r\nChat.propTypes = {\r\n  chatId: PropTypes.string.isRequired,\r\n  label: PropTypes.string.isRequired,\r\n  updateMessages: PropTypes.func.isRequired,\r\n  activeRewind: PropTypes.object\r\n}\r\n\r\nexport default Chat\r\n","import { connect } from 'react-redux'\r\nimport Chat from '../../components/chat'\r\nimport { updateMessages } from '../../actions/messages'\r\n\r\nconst mapStateToProps = (state) => ({\r\n  activeRewind: state.rewindPoints.points.filter(point => point.doc.active)[0]\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  updateMessages: (messages, chatId) => {\r\n    dispatch(updateMessages(messages, chatId))\r\n  }\r\n})\r\n\r\nconst ChatContainer = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Chat)\r\n\r\nexport default ChatContainer\r\n","export const chat = { xs: 12, sm: 6, md: 4, lg: 4 }\r\n","import React from 'react'\r\nimport { css } from 'aphrodite/no-important';\r\nimport styles from './styles'\r\nimport { Row, Col } from 'reactstrap'\r\nimport Chat from '../../containers/chat'\r\nimport { chat as chatSizes } from '../../defaults/schemeSizes'\r\n\r\nconst Chatlist = ({ chats, form }) => {\r\n  return (\r\n    <Row>\r\n      {chats.map((chat, key) => (chat &&\r\n        <Col xs={chatSizes.xs} sm={chatSizes.sm} md={chatSizes.md} key={key}>\r\n          <div className={css(styles.chatItem)}>\r\n            <Chat chatId={chat.id} label={chat.label} form={form}/>\r\n          </div>\r\n        </Col>\r\n      ))}\r\n    </Row>\r\n  )\r\n}\r\n\r\nexport default Chatlist\r\n","import { connect } from 'react-redux'\r\nimport Chats from '../components/chatlist'\r\nimport { chatAddBtnSettings } from '../defaults/messageTypesKeys'\r\n\r\nconst mapStateToProps = stage => ({\r\n  chats: stage.chats,\r\n  form: {\r\n    ...stage.messageTypes.find(type => (type.scheme === chatAddBtnSettings.scheme)),\r\n    format: chatAddBtnSettings.format\r\n  }\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({})\r\n\r\nconst ChatsContainer = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Chats)\r\n\r\nexport default ChatsContainer\r\n","import React from 'react'\r\nimport { css } from 'aphrodite/no-important';\r\nimport styles from './styles'\r\nimport { Container } from 'reactstrap'\r\nimport Control from '../../containers/control'\r\nimport Chats from '../../containers/chatlist'\r\n\r\nconst Homepage = () => {\r\n  return (\r\n    <Container fluid>\r\n      <div className={css(styles.main)}>\r\n        <Chats/>\r\n        <Control/>\r\n      </div>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Homepage\r\n","/*\r\n * action types\r\n */\r\n\r\nexport const CREATE_EXPORT = \"CREATE_EXPORT\"\r\nexport const REMOVE_EXPORTS = \"REMOVE_EXPORTS\"\r\n\r\n/*\r\n * action creators\r\n */\r\n\r\nexport function createExport(messageTypes) {\r\n  return { type: CREATE_EXPORT, payload: { messageTypes: messageTypes } }\r\n}\r\nexport function removeExports() {\r\n  return { type: REMOVE_EXPORTS, payload: {} }\r\n}\r\n","import { StyleSheet } from 'aphrodite'\r\n\r\nexport default StyleSheet.create({\r\n  main: {\r\n    padding: '15px 0'\r\n  },\r\n  title: {\r\n    fontWeight: 'bold',\r\n    display: 'inline-block',\r\n    lineHeight: '30px'\r\n  },\r\n  pageTitle: {\r\n    marginBottom: '30px'\r\n  },\r\n  item: {\r\n    width: '100%',\r\n    marginBottom: '15px'\r\n  }\r\n})\r\n","import React from 'react'\r\nimport excellentExport from 'excellentexport';\r\n// import { css } from 'aphrodite/no-important';\r\n// import styles from './styles'\r\nimport { Button, ButtonGroup } from 'reactstrap'\r\n// import PropTypes from 'prop-types'\r\n\r\nconst ExcelExport = ({ exp, index }) => {\r\n\r\n  const ids = {\r\n    xlsx: `export_button_${index}_xlsx`,\r\n    xls: `export_button_${index}_xls`,\r\n    csv: `export_button_${index}_csv`\r\n  }\r\n\r\n  const generateFile = (format) => {\r\n    return excellentExport.convert({\r\n      anchor: ids[format],\r\n      filename: exp.name,\r\n      format: format,\r\n    }, exp.data.map(dataItem => {\r\n      let fields = []\r\n      if(dataItem.data.length) {\r\n        fields = Object.keys(dataItem.data[0].doc)\r\n      }\r\n\r\n      return ({\r\n        name: dataItem.title,\r\n        from: {\r\n          arrayHasHeader: true,\r\n          array: [\r\n            fields.map(fld => (fld.charAt(0).toUpperCase() + fld.slice(1))),\r\n            ...dataItem.data.map(({ doc }) => (fields.map(fld => (doc[fld]))))\r\n          ]\r\n        }\r\n      })\r\n    }))\r\n  }\r\n\r\n  return (\r\n    <ButtonGroup>\r\n      <Button\r\n        href='#'\r\n        size='sm'\r\n        color='success'\r\n        onClick={e => (generateFile('xlsx'))}\r\n        id={ids['xlsx']}\r\n      >Download .xlsx</Button>\r\n      <Button\r\n        href='#'\r\n        size='sm'\r\n        color='success'\r\n        onClick={e => (generateFile('xls'))}\r\n        id={ids['xls']}\r\n      >Download .xls</Button>\r\n    </ButtonGroup>\r\n  )\r\n}\r\n\r\nExcelExport.propTypes = {\r\n\r\n}\r\n\r\nexport default ExcelExport\r\n","import React from 'react'\r\nimport { css } from 'aphrodite/no-important';\r\nimport styles from './styles'\r\nimport { Container, Card, CardHeader, Button, ButtonGroup } from 'reactstrap'\r\nimport PropTypes from 'prop-types'\r\nimport ExcelExport from './excel'\r\n\r\nconst Export = ({ messageTypes, chats, exportItems, createExport, removeExports }) => {\r\n  return (\r\n    <Container fluid>\r\n      <div className={css(styles.main)}>\r\n        <h3 className={css(styles.pageTitle)}>\r\n          Exports:\r\n          <div className=\"float-right\">\r\n            <ButtonGroup>\r\n              <Button color=\"primary\" onClick={() => {createExport(messageTypes)}}>Create Export</Button>\r\n              <Button color=\"danger\" onClick={removeExports}>Clear Export History</Button>\r\n            </ButtonGroup>\r\n          </div>\r\n        </h3>\r\n        {exportItems.map((exp, key) => (\r\n          <div className={css(styles.item)} key={key}>\r\n            <Card>\r\n              <CardHeader>\r\n                <div className={css(styles.title)}>{exp.name}</div>\r\n                <div className=\"float-right\">\r\n                  <ExcelExport exp={exp} index={key}/>\r\n                </div>\r\n              </CardHeader>\r\n            </Card>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </Container>\r\n  )\r\n}\r\n\r\nExport.propTypes = {\r\n  messageTypes: PropTypes.array,\r\n  createExport: PropTypes.func.isRequired,\r\n  removeExports: PropTypes.func.isRequired,\r\n  exportItems: PropTypes.array,\r\n  chats: PropTypes.array,\r\n}\r\n\r\nexport default Export\r\n","import { connect } from 'react-redux'\r\nimport { createExport, removeExports } from '../actions/exportItems'\r\n\r\nimport ExportItems from '../components/exportItems'\r\n\r\nconst mapStateToProps = state => ({\r\n  messageTypes: state.messageTypes,\r\n  chats: state.chats.map((chat) => chat && chat.id),\r\n  exportItems: state.exportItems\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\r\n  return {\r\n    createExport: (messageTypes) => {\r\n      dispatch(createExport(messageTypes))\r\n    },\r\n    removeExports: () => {\r\n      dispatch(removeExports())\r\n    }\r\n  }\r\n}\r\n\r\nconst ExportContainer = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ExportItems)\r\n\r\nexport default ExportContainer\r\n","import { StyleSheet } from 'aphrodite'\r\n\r\nexport default StyleSheet.create({\r\n  main: {\r\n    padding: '15px 0',\r\n  },\r\n  devSection: {\r\n    paddingTop: '15px'\r\n  }\r\n})\r\n","import JSONEditor from '@json-editor/json-editor'\r\n// -------- Editor class ---------------------------------------------------\r\n\r\n// create a JSON Editor, elementId is the id in which to render the editor\r\nfunction Editor(elementId) {\r\n    this.jsonEditor = null;\r\n    this.renderZone = typeof elementId === \"string\" ? document.getElementById(elementId) : elementId.current;\r\n}\r\n\r\n// Destroy editor, and remove it from view\r\nEditor.prototype.destroy = function() {\r\n    if(this.jsonEditor) {\r\n        this.jsonEditor.destroy();\r\n        this.jsonEditor = null;\r\n    }\r\n}\r\n\r\n// Recreate a new editor based on the given schema and start value\r\n// If schema is undefined, the editor is not recreated, but only destroyed\r\nEditor.prototype.updateSchema = function(schema) {\r\n    this.destroy();\r\n    this.jsonEditor = new JSONEditor(this.renderZone, { schema: schema });\r\n}\r\n\r\n// Validate JSON\r\nEditor.prototype.validate = function() {\r\n    return this.jsonEditor.validate();\r\n}\r\n\r\n// Get generated JSON\r\nEditor.prototype.getJSON = function() {\r\n    return this.jsonEditor.getValue();\r\n}\r\n\r\n// --------------- PreviewEditor subclass ------------------------------------\r\n\r\n// create a JSON Editor that doesn't allow specifying additional properties,\r\n// but only those specified in the schema can be set.\r\n// elementId is the id in which to render the editor,\r\nexport function PreviewEditor(elementId) {\r\n    Editor.call(this, elementId);\r\n}\r\n\r\n// Inherit Editor methods\r\nPreviewEditor.prototype = Object.create(Editor.prototype);\r\n\r\n// After `PreviewEditor.prototype = Object.create(Editor.prototype)` instruction,\r\n// PreviewEditor.prototype is a copy of Editor.prototype,\r\n// so the `constructor` property of PreviewEditor.prototype is Editor,\r\n// but a PreviewEditor object is created with the PreviewEditor constructor,\r\n// so we override the `constructor` property of PreviewEditor.prototype to PreviewEditor\r\nObject.defineProperty(PreviewEditor.prototype, 'constructor', {\r\n    value: PreviewEditor,\r\n    enumerable: false, // so that it does not appear in 'for in' loop\r\n    writable: true\r\n});\r\n\r\nPreviewEditor.prototype.updateSchema = function(schema) {\r\n    this.destroy();\r\n    this.jsonEditor = new JSONEditor(this.renderZone, {\r\n        schema: schema,\r\n        no_additional_properties: true\r\n    });\r\n}\r\n\r\n\r\n// --------------- SchemaEditor subclass -------------------------------------\r\n\r\n// create a JSON Editor for a JSON Schema, it adds a save button\r\n// to save the Schema to a file, and also\r\n// makes the 'Properties' buttons distinguishable to avoid confusion between\r\n// schema properties and object properties.\r\n// elementId is the id in which to render the editor,\r\nexport function SchemaEditor(elementId) {\r\n    Editor.call(this, elementId);\r\n\r\n    // Check whether the node is a properties button for an object,\r\n    // and not for the schema of an object named properties\r\n    var isObjectPropertiesButton = function(node) {\r\n        // Does the path end in '.properties'?\r\n        if(node.matches('div[data-schemapath$=\".properties\"] > h3 > div > button.json-editor-btntype-properties')) {\r\n            var containingDiv = node.parentElement.parentElement.parentElement;\r\n            var span = containingDiv.querySelector('h3 > span');\r\n\r\n            // Is it an object properties or a property named properties?\r\n            if(span && span.innerText === 'properties') {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n\r\n    this.observer = new MutationObserver(function(mutationsList, observer) {\r\n        for(var mutation of mutationsList) {\r\n            mutation.addedNodes.forEach(function(node) {\r\n                if(node.nodeType == 1) {\r\n                    if(isObjectPropertiesButton(node)) {\r\n                        node.querySelector('span').innerText = 'Add/Remove';\r\n                    }\r\n                    else if(node.matches('button.json-editor-btntype-properties')) {\r\n                        // For other properties buttons, remove the 'Properties' label,\r\n                        // and use a cog as icon\r\n                        var icon = node.querySelector('i');\r\n                        icon.classList.remove('fa-pen');\r\n                        icon.classList.add('fa-cog');\r\n\r\n                        var span = node.querySelector('span');\r\n                        span.innerText = '';\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    this.observer.observe(this.renderZone, { childList: true, subtree: true });\r\n}\r\n\r\n// Inherit Editor methods\r\nSchemaEditor.prototype = Object.create(Editor.prototype);\r\n\r\n// After `SchemaEditor.prototype = Object.create(Editor.prototype)` instruction,\r\n// SchemaEditor.prototype is a copy of Editor.prototype,\r\n// so the `constructor` property of SchemaEditor.prototype is Editor,\r\n// but a SchemaEditor object is created with the SchemaEditor constructor,\r\n// so we override the `constructor` property of SchemaEditor.prototype to SchemaEditor\r\nObject.defineProperty(SchemaEditor.prototype, 'constructor', {\r\n    value: SchemaEditor,\r\n    enumerable: false, // so that it does not appear in 'for in' loop\r\n    writable: true\r\n});\r\n\r\n// Override the updateSchema function\r\nSchemaEditor.prototype.updateSchema = function(schema) {\r\n    this.destroy();\r\n\r\n    // Add extra validation logic for integer schemas that use the `range` format.\r\n    // For integer schemas that use the `range` format we require that minimum and maximum properties are set, too.\r\n    var range_integer_validator = function(schema, value, path) {\r\n        var errors = [];\r\n        if(value.type === 'integer' && value.format === 'range') {\r\n            if(typeof value.minimum === 'undefined' || typeof value.maximum === 'undefined') {\r\n                errors.push({\r\n                    path: path,\r\n                    property: 'format',\r\n                    message: 'The range format requires that you specify both minimum and maximum properties, too.'\r\n                });\r\n            }\r\n        }\r\n        return errors;\r\n    };\r\n\r\n    // Check that if minimum and maximum are specified, minimum <= maximum\r\n    var min_max_consistence_validator = function(schema, value, path) {\r\n        var errors = [];\r\n        if(value.type === 'integer' || value.type === 'number') {\r\n            if(typeof value.minimum !== 'undefined' && typeof value.minimum !== 'undefined' && value.minimum > value.maximum) {\r\n                errors.push({\r\n                    path: path,\r\n                    property: 'maximum',\r\n                    message: 'The maximum value must be greater than or equal than the minimum value.'\r\n                });\r\n            }\r\n        }\r\n        return errors;\r\n    };\r\n\r\n    // Recreate the JSON-Editor\r\n    this.jsonEditor = new JSONEditor(this.renderZone, {\r\n        schema: schema,\r\n        custom_validators: [ range_integer_validator, min_max_consistence_validator ]\r\n    });\r\n\r\n\r\n    // Add a save button\r\n    var filename = 'schema.json';\r\n    var saveButtonLabel = 'Save';\r\n\r\n    this.jsonEditor.on('ready', function() {\r\n        var button = this.root.getButton(saveButtonLabel, 'save', saveButtonLabel);\r\n        var button_holder = this.root.theme.getHeaderButtonHolder();\r\n        button_holder.appendChild(button);\r\n        this.root.header.parentNode.insertBefore(button_holder, this.root.header.nextSibling);\r\n\r\n        var jsonEditor = this;\r\n        button.addEventListener('click', function(e) {\r\n            e.preventDefault();\r\n            var contents = jsonEditor.getValue();\r\n            var blob = new Blob([JSON.stringify(contents, null, 2)], {\r\n                type: \"application/json;charset=utf-8\"\r\n            });\r\n\r\n            if(window.navigator && window.navigator.msSaveOrOpenBlob) {\r\n                window.navigator.msSaveOrOpenBlob(blob, filename);\r\n            }\r\n            else {\r\n                var a = document.createElement('a');\r\n                a.download = filename;\r\n                a.href = URL.createObjectURL(blob);\r\n                a.dataset.downloadurl = ['text/plain', a.download, a.href].join(':');\r\n\r\n                a.dispatchEvent(new MouseEvent('click', {\r\n                    'view': window,\r\n                    'bubbles': true,\r\n                    'cancelable': false\r\n                }));\r\n            }\r\n        }, false);\r\n    });\r\n}\r\n","import React, { Component } from 'react'\r\nimport { Card, CardHeader, CardBody, CardFooter } from 'reactstrap'\r\nimport { SchemaEditor } from '../../js-modules/json-schema-editor/editor'\r\nimport PropTypes from 'prop-types'\r\nimport JSONEditor from '@json-editor/json-editor'\r\n\r\nclass JsonSchemaEditor extends Component {\r\n\r\n  constructor(props, content) {\r\n    super(props, content)\r\n\r\n    this.schemaEditor = null\r\n    this.editorBox = React.createRef()\r\n    this.onChange = this.onChange.bind(this)\r\n    this.updateEditor = this.updateEditor.bind(this)\r\n    this.saved = \"\"\r\n    this.value = this.props.defaultValue\r\n  }\r\n\r\n  onChange(newValue, e) {\r\n    const errors = this.schemaEditor.validate()\r\n    if(errors.length) {\r\n      alert('Invalid schema')\r\n    }\r\n    else {\r\n      if(this.props.onChange) {\r\n        this.value = this.schemaEditor.jsonEditor.getValue()\r\n        this.props.onChange(this.schemaEditor.getJSON())\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.schemaEditor = new SchemaEditor('schema-editor')\r\n    this.updateEditor(this.props.schema, this.props.options, this.props.defaultValue)\r\n  }\r\n\r\n  componentWillReceiveProps({schema, options}) {\r\n    this.updateEditor(schema, options)\r\n  }\r\n\r\n  updateEditor(schema, options, setValue) {\r\n    try {\r\n      const newJson = JSON.stringify(schema)\r\n      if(newJson !== this.save || options.counter !== this.props.options.counter) {\r\n\r\n        JSONEditor.defaults.options.object_layout = options.layout\r\n        JSONEditor.defaults.options = {\r\n          ...JSONEditor.defaults.options,\r\n          ...options.booleanOptions\r\n        }\r\n\r\n        this.save = newJson\r\n        this.schemaEditor.updateSchema(schema)\r\n        this.schemaEditor.jsonEditor.setValue(this.value)\r\n        this.schemaEditor.jsonEditor.on('change', this.onChange)\r\n      }\r\n    }\r\n    catch(err) {\r\n      alert('Invalid json schema')\r\n      console.log(err)\r\n    }\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <Card>\r\n        <CardHeader>\r\n          Schema Editor\r\n        </CardHeader>\r\n        <CardBody>\r\n          <div id=\"schema-editor\"/>\r\n        </CardBody>\r\n        <CardFooter>\r\n        </CardFooter>\r\n      </Card>\r\n    )\r\n  }\r\n}\r\n\r\nJsonSchemaEditor.propTypes = {\r\n  schema: PropTypes.object.isRequired,\r\n  onChange: PropTypes.func\r\n}\r\n\r\nexport default JsonSchemaEditor\r\n","import React, { Component } from 'react'\r\nimport { Card, CardHeader, CardBody, CardFooter } from 'reactstrap'\r\nimport { PreviewEditor } from '../../js-modules/json-schema-editor/editor'\r\n\r\nclass EditorPreview extends Component {\r\n\r\n  constructor(props, content) {\r\n    super(props, content)\r\n\r\n    this.previewBox = React.createRef()\r\n    this.editorPreview = null\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.editorPreview = new PreviewEditor('editor-preview')\r\n  }\r\n\r\n  componentWillReceiveProps({ schema }) {\r\n    this.editorPreview.destroy()\r\n    this.editorPreview.updateSchema(schema)\r\n\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <Card>\r\n        <CardHeader>\r\n          Editor Preview\r\n        </CardHeader>\r\n        <CardBody>\r\n          <div id='editor-preview' ref={this.previewBox}/>\r\n        </CardBody>\r\n        <CardFooter>\r\n          The Editor Preview will be updated as you make changes in the Schema Editor\r\n        </CardFooter>\r\n      </Card>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default EditorPreview\r\n","import React, { Component } from 'react'\r\nimport ReactAce from 'react-ace-editor'\r\nimport { Card, CardHeader, CardBody, CardFooter, Button } from 'reactstrap'\r\n\r\nclass MetaSchema extends Component {\r\n\r\n  constructor(props, content) {\r\n    super(props, content)\r\n\r\n    this.editorBox = React.createRef()\r\n    this.onChange = this.onChange.bind(this)\r\n    this.setEditorValue = this.setEditorValue.bind(this)\r\n    this.onUpdateClick = this.onUpdateClick.bind(this)\r\n    this.saveJson = \"\"\r\n    this.state = {}\r\n  }\r\n\r\n  onChange(newValue, e) {\r\n    // const editor = this.editorBox.current.editor; // The editor object is from Ace's API\r\n    // console.log(editor.getValue()); // Outputs the value of the editor\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setEditorValue(JSON.stringify(this.props.value, null, 2))\r\n  }\r\n\r\n  componentWillRecivedProps({ value }) {\r\n    this.setEditorValue(JSON.stringify(value, null, 2))\r\n  }\r\n\r\n  setEditorValue(json) {\r\n    if(this.editorBox.current && this.saveJson !== json) {\r\n      this.saveJson = json\r\n      this.editorBox.current.editor.setValue(this.saveJson)\r\n      this.editorBox.current.editor.session.getSelection().clearSelection()\r\n      this.editorBox.current.editor.resize()\r\n    }\r\n  }\r\n\r\n  onUpdateClick() {\r\n    this.props.onSchemaSubmit(this.editorBox.current.editor.getValue())\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <Card>\r\n        <CardHeader>\r\n          Meta Schema\r\n        </CardHeader>\r\n        <CardBody style={{padding: 0}}>\r\n          <ReactAce\r\n            mode=\"json\"\r\n            theme=\"monokai\"\r\n            setReadOnly={false}\r\n            onChange={this.onChange}\r\n            style={{ height: '400px' }}\r\n            ref={this.editorBox}\r\n          />\r\n        </CardBody>\r\n        <CardFooter>\r\n          <Button onClick={this.onUpdateClick}>Update Schema Editor</Button>\r\n        </CardFooter>\r\n      </Card>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default MetaSchema\r\n","export const booleanOptions = [\r\n  { value: \"required_by_default\", label: \"Object properties required by default\", selected: false },\r\n  { value: \"display_required_only\", label: \"Only show required properties by default\", selected: false },\r\n  { value: \"no_additional_properties\", label: \"No additional object properties\", selected: false },\r\n  { value: \"ajax\", label: \"Allow loading schemas via Ajax\", selected: false },\r\n  { value: \"disable_edit_json\", label: 'Disable \"Edit JSON\" buttons' },\r\n  { value: \"disable_collapse\", label: \"Disable collapse buttons\", selected: false },\r\n  { value: \"disable_properties\", label: \"Disable properties buttons\", selected: false },\r\n  { value: \"disable_array_add\", label: \"Disable array add buttons\", selected: false },\r\n  { value: \"disable_array_reorder\", label: \"Disable array move buttons\", selected: false },\r\n  { value: \"disable_array_delete\", label: \"Disable array delete buttons\", selected: false },\r\n  { value: \"enable_array_copy\", label: \"Add copy buttons to arrays\", selected: false },\r\n  { value: \"array_controls_top\", label: \"Array controls will be displayed at top of list\", selected: false },\r\n  { value: \"disable_array_delete_all_rows\", label: \"Disable array delete all rows buttons\", selected: false },\r\n  { value: \"disable_array_delete_last_row\", label: \"Disable array delete last row buttons\", selected: false }\r\n]\r\n","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport {\r\n  Card,\r\n  CardHeader,\r\n  CardBody,\r\n  CardFooter,\r\n  InputGroup,\r\n  InputGroupAddon,\r\n  Input\r\n} from 'reactstrap'\r\n\r\nimport { booleanOptions } from '../../defaults/jsonEditor'\r\n\r\n\r\nclass EditorPreview extends Component {\r\n\r\n  constructor(props, content) {\r\n    super(props, content)\r\n\r\n    this.onBooleanOptionsChange = this.onBooleanOptionsChange.bind(this)\r\n    this.onLayoutChange = this.onLayoutChange.bind(this)\r\n  }\r\n\r\n  onBooleanOptionsChange(e) {\r\n    let options = e.target.options;\r\n    let value = {};\r\n    for (let i = 0, l = options.length; i < l; i++) {\r\n      value[options[i].value] = options[i].selected;\r\n    }\r\n    this.props.onChange({\r\n      ...this.props,\r\n      booleanOptions: value,\r\n      counter: (this.props.options.counter || 0) + 1\r\n    })\r\n  }\r\n\r\n  onLayoutChange(e) {\r\n    this.props.onChange({\r\n      ...this.props.options,\r\n      layout: e.target.value,\r\n      counter: (this.props.options.counter || 0) + 1\r\n    })\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <Card>\r\n        <CardHeader>\r\n          Boolean options\r\n        </CardHeader>\r\n        <CardBody>\r\n          <Input\r\n            type=\"select\"\r\n            multiple size=\"11\"\r\n            defaultValue={[]}\r\n            onChange={this.onBooleanOptionsChange}\r\n          >\r\n            {booleanOptions.map((option, key) => (\r\n              <option key={key} value={option.value}>{option.label}</option>\r\n            ))}\r\n          </Input>\r\n        </CardBody>\r\n        <CardFooter>\r\n          <InputGroup>\r\n            <InputGroupAddon addonType=\"prepend\">Object layout:</InputGroupAddon>\r\n            <Input type=\"select\" value={this.props.options.layout} onChange={this.onLayoutChange}>\r\n              <option value=\"normal\">normal</option>\r\n              <option value=\"grid\">grid</option>\r\n            </Input>\r\n          </InputGroup>\r\n        </CardFooter>\r\n      </Card>\r\n    )\r\n  }\r\n}\r\n\r\nEditorPreview.propTypes = {\r\n  onChange: PropTypes.func.isRequired,\r\n  options: PropTypes.object.isRequired\r\n}\r\n\r\n\r\nexport default EditorPreview\r\n","import React from 'react'\r\n\r\nconst DevSection = ({children}) => {\r\n  return (\r\n    <div>\r\n      {process.env.REACT_APP_ENV === \"dev\" && children}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DevSection\r\n","import React, { Component } from 'react'\r\nimport { css } from 'aphrodite/no-important'\r\nimport styles from './styles'\r\nimport jsonMetaSchema from './data.json'\r\nimport { Container, Col, Row } from 'reactstrap'\r\nimport JSONEditor from '@json-editor/json-editor'\r\nimport Editor from './jsonEditor'\r\nimport Preview from './editorPreview'\r\nimport SchemaView from './metaSchema'\r\nimport Options from './options'\r\nimport DevSection from '../devSection'\r\n\r\nclass MessageTypes extends Component {\r\n\r\n  constructor(props, content) {\r\n    super(props, content)\r\n\r\n    JSONEditor.defaults.options.iconlib = \"fontawesome5\"\r\n    JSONEditor.defaults.options.theme   = 'bootstrap4'\r\n    this.updateMetaSchema = this.updateMetaSchema.bind(this)\r\n    this.updatePreviewSchema = this.updatePreviewSchema.bind(this)\r\n    this.updateOptions = this.updateOptions.bind(this)\r\n\r\n    this.schemaEditor = null\r\n    this.editorPreview = null\r\n\r\n    this.defaultValue = {\r\n      \"type\": \"object\",\r\n      \"properties\": {\r\n        \"Date\": {\r\n          \"type\": \"string\",\r\n          \"format\": \"datetime-local\"\r\n        },\r\n        \"Status\": {\r\n          \"type\": \"string\",\r\n          \"enum\": [\r\n            \"Minor\",\r\n            \"Major\",\r\n            \"Critical\"\r\n          ]\r\n        },\r\n        \"Description\": {\r\n          \"type\": \"string\",\r\n          \"format\": \"textarea\"\r\n        }\r\n      },\r\n      \"title\": \"Machinery Failure\",\r\n      \"format\": \"grid\"\r\n    }\r\n\r\n    this.state = {\r\n      metaSchema: jsonMetaSchema,\r\n      previewSchema: null,\r\n      options: {\r\n        layout: JSONEditor.defaults.options.object_layout,\r\n        booleanOptions: {}\r\n      }\r\n    }\r\n  }\r\n\r\n  updatePreviewSchema(schema) {\r\n    console.log(\"preview update\");\r\n    this.setState({previewSchema: schema})\r\n  }\r\n\r\n  updateOptions(options) {\r\n    console.log(\"options update\");\r\n    this.setState({options: options})\r\n  }\r\n\r\n  updateMetaSchema(schema) {\r\n    console.log(\"editor update\");\r\n    this.setState({metaschema: schema})\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className={css(styles.main)}>\r\n        <Container fluid>\r\n          <Row>\r\n            <Col md={6}>\r\n              <Editor\r\n                schema={this.state.metaSchema}\r\n                onChange={this.updatePreviewSchema}\r\n                options={this.state.options}\r\n                defaultValue={this.defaultValue}\r\n              />\r\n            </Col>\r\n            <Col md={6}>\r\n              <Preview schema={this.state.previewSchema}/>\r\n            </Col>\r\n          </Row>\r\n          <DevSection>\r\n            <div className={css(styles.devSection)}>\r\n              <Row>\r\n                <Col md={6}>\r\n                  <Options options={this.state.options} onChange={this.updateOptions}/>\r\n                </Col>\r\n                <Col md={6}>\r\n                  <SchemaView value={this.state.metaSchema} onSchemaSubmit={this.updateMetaSchema}/>\r\n                </Col>\r\n              </Row>\r\n            </div>\r\n          </DevSection>\r\n        </Container>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MessageTypes\r\n","import React, { Component } from 'react'\r\nimport getDb from '../databases'\r\nimport { prefix, filters } from '../databases/filters'\r\nimport { views } from '../databases/views'\r\n\r\nclass CheckDb extends Component {\r\n  constructor(props, content) {\r\n    super(props, content)\r\n\r\n    this.check = this.check.bind(this)\r\n    this.messagesFiltersInitialized = false\r\n    this.messagesViewsInitialized = false\r\n    this.state = {\r\n      done: false\r\n    }\r\n  }\r\n\r\n  check() {\r\n    if(this.messagesFiltersInitialized && this.messagesViewsInitialized) {\r\n      this.setState({done: true})\r\n    }\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.checkMessages()\r\n  }\r\n\r\n  checkMessages() {\r\n    this.checkFilter(filters, prefix, Object.keys(filters))\r\n    this.checkView(views, Object.keys(views))\r\n  }\r\n\r\n  checkFilter(filters, prefix, filterKeys, currentKey) {\r\n\r\n    if(!currentKey) currentKey = 0\r\n    if(!filterKeys.length || filterKeys.length <= currentKey) {\r\n      this.messagesFiltersInitialized = true\r\n      this.check()\r\n      return false\r\n    }\r\n\r\n    const db = getDb(filterKeys[currentKey], false, {live: false})\r\n\r\n    const docId = '_design/' + prefix + filterKeys[currentKey]\r\n\r\n    db.get(docId).then(row => {\r\n      let equal = true\r\n      if(row.filters) {\r\n        Object.keys(filters[filterKeys[currentKey]]).forEach(key => {\r\n          if(!row.filters[key] || filters[filterKeys[currentKey]][key] !== row.filters[key])\r\n            equal = false\r\n        })\r\n      }\r\n      else equal = false\r\n\r\n      if(equal) {\r\n        this.checkFilter(filters, prefix, filterKeys, currentKey + 1)\r\n      }\r\n      else {\r\n        console.log(`Updateing Filters ${docId}`)\r\n        db.put({\r\n          ...row,\r\n          filters: filters[filterKeys[currentKey]]\r\n        }).then(() => {\r\n          console.log(`Updateing Filters ${docId} (success)`)\r\n          this.checkFilter(filters, prefix, filterKeys, currentKey + 1)\r\n        })\r\n      }\r\n    }).catch(({ status }) => {\r\n      if(status === 404) {\r\n        console.log(`Creating Filters ${docId}`)\r\n        db.put({\r\n          _id: docId,\r\n          filters: filters[filterKeys[currentKey]]\r\n        }).then(() => {\r\n          console.log(`Creating Filters ${docId} (success)`)\r\n          this.checkFilter(filters, prefix, filterKeys, currentKey + 1)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  checkView(views, viewKeys, currentKey) {\r\n    if(!currentKey) currentKey = 0\r\n    if(!viewKeys.length || viewKeys.length <= currentKey) {\r\n      this.messagesViewsInitialized = true\r\n      this.check()\r\n      return false\r\n    }\r\n\r\n    const docId = '_design/' + viewKeys[currentKey]\r\n    const db = getDb(viewKeys[currentKey], false, {live: false})\r\n\r\n    db.get(docId).then(row => {\r\n      let equal = true\r\n      if(row.views) {\r\n        Object.keys(views[viewKeys[currentKey]]).forEach(key => {\r\n          if(!row.views[key] || views[viewKeys[currentKey]][key].map !== row.views[key].map)\r\n            equal = false\r\n        })\r\n      }\r\n      else equal = false\r\n\r\n      if(equal) {\r\n        this.checkView(views, viewKeys, currentKey + 1)\r\n      }\r\n      else {\r\n        console.log(`Updateing Views ${docId}`)\r\n        db.put({\r\n          ...row,\r\n          views: views[viewKeys[currentKey]]\r\n        }).then(() => {\r\n          console.log(`Updateing Views ${docId} (success)`)\r\n          this.checkView(views, viewKeys, currentKey + 1)\r\n        })\r\n      }\r\n    }).catch(({ status }) => {\r\n      console.log(\"test\", status);\r\n      if(status === 404) {\r\n        console.log(`Creating Views ${docId}`)\r\n        db.put({\r\n          _id: docId,\r\n          views: views[viewKeys[currentKey]]\r\n        }).then(() => {\r\n          console.log(`Views Filters ${docId} (success)`)\r\n          this.checkView(views, viewKeys, currentKey + 1)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (<div>{this.state.done && this.props.children}</div>)\r\n  }\r\n}\r\n\r\nexport default CheckDb\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst PouchStore = ({ initStore, children }) => {\r\n  initStore()\r\n\r\n  return (\r\n    <div>{children}</div>\r\n  )\r\n}\r\n\r\nPouchStore.propTypes = {\r\n  initStore: PropTypes.func.isRequired,\r\n  children: PropTypes.node\r\n}\r\n\r\nexport default PouchStore\r\n","import { connect } from 'react-redux'\r\nimport PouchStore from '../components/pouchStore'\r\nimport { initPouch } from '../actions/init'\r\n\r\nconst mapStateToProps = (state) => ({\r\n\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  initStore: () => {\r\n    dispatch(initPouch())\r\n  }\r\n})\r\n\r\nconst PouchStoreContainer = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(PouchStore)\r\n\r\nexport default PouchStoreContainer\r\n","export const INIT = \"INIT\"\r\n\r\n// use it to init pouchdbMiddleware\r\nexport const initPouch = () => {\r\n  return { type: INIT, payload: {} }\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Provider } from 'react-redux'\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'\r\n\r\nimport Homepage from './homepage'\r\nimport Export from '../containers/exportItems'\r\nimport JsonSchemaEditor from './jsonSchemaEditor'\r\nimport CheckDb from './checkDb'\r\nimport PouchStore from '../containers/pouchStore'\r\n\r\nconst Root = ({ store }) => (\r\n  <Provider store={store}>\r\n    <PouchStore>\r\n      <CheckDb>\r\n        <Router>\r\n          <Switch>\r\n            <Route exact path=\"/\" component={Homepage} />\r\n            <Route path=\"/export\" component={Export} />\r\n            <Route path=\"/json-schema-editor\" component={JsonSchemaEditor} />\r\n          </Switch>\r\n        </Router>\r\n      </CheckDb>\r\n    </PouchStore>\r\n  </Provider>\r\n)\r\n\r\nRoot.propTypes = {\r\n  store: PropTypes.object.isRequired\r\n}\r\n\r\nexport default Root\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import { persistentReducer } from 'redux-pouchdb-rethink'\r\nimport getDb from '../databases'\r\nimport { ADD_CHAT, REMOVE_CHAT } from '../actions/chats'\r\n\r\nconst initialState = []\r\n\r\nconst chats = (state = initialState, action) => {\r\n\r\n  switch (action.type) {\r\n    case ADD_CHAT:\r\n      return [...state, action.payload.chat]\r\n    case REMOVE_CHAT:\r\n      return state.filter(chat => chat.id !== action.payload)\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst db = getDb('chats')\r\n\r\nexport default persistentReducer(chats, {db: db, name: \"chats\"})\r\n","import { getToKeys, getFromKeys } from './allowedChats'\r\n\r\nconst form = {\r\n  \"type\": \"object\",\r\n  \"format\": \"grid\",\r\n  \"required\": [\r\n    \"from\",\r\n    \"to\",\r\n    \"title\",\r\n  ],\r\n  \"properties\": {\r\n    \"from\": {\r\n      \"type\": \"string\",\r\n      \"enum\": getFromKeys()\r\n    },\r\n    \"to\": {\r\n      \"type\": \"string\",\r\n      \"enum\": getToKeys()\r\n    },\r\n    \"title\": {\r\n      \"type\": \"string\",\r\n      \"description\": \"Title for this message\"\r\n    }\r\n  }\r\n}\r\n\r\nconst properties = [\r\n  {\r\n    \"scheme\": \"height\",\r\n    \"title\": \"PersonHeight\",\r\n    \"properties\": {\r\n      \"height\": {\r\n        \"type\": \"integer\",\r\n        \"default\": 12\r\n      }\r\n    }\r\n  },\r\n  {\r\n    \"scheme\": \"weight\",\r\n    \"title\": \"PersonWeight\",\r\n    \"properties\": {\r\n      \"weight\": {\r\n        \"type\": \"integer\",\r\n        \"default\": 12\r\n      }\r\n    }\r\n  },\r\n  {\r\n    \"scheme\": \"color\",\r\n    \"title\": \"PersonColor\",\r\n    \"properties\": {\r\n      \"color\": {\r\n        \"type\": \"string\",\r\n        \"format\": \"color\"\r\n      }\r\n    }\r\n  },\r\n  {\r\n    \"scheme\": \"name\",\r\n    \"title\": \"PersonName\",\r\n    \"properties\": {\r\n      \"name\": {\r\n        \"type\": \"string\",\r\n        \"format\": \"string\",\r\n      }\r\n    }\r\n  }\r\n]\r\n\r\nconst getMessageTypes = () => {\r\n  return properties.map(prop => {\r\n    return {\r\n      ...form,\r\n      scheme: prop.scheme,\r\n      title: prop.title,\r\n      properties: {\r\n        ...form.properties,\r\n        ...prop.properties\r\n      },\r\n      required: [\r\n        ...form.required,\r\n        prop.scheme\r\n      ]\r\n    }\r\n  })\r\n}\r\n\r\nexport default getMessageTypes\r\n","import { persistentReducer } from 'redux-pouchdb-rethink'\r\nimport getMessageTypes from '../defaults/messageTypes'\r\nimport getDb from '../databases'\r\n\r\nconst initialState = getMessageTypes()\r\n\r\nconst messageTypes = (state = initialState, action) => {\r\n\r\n  switch (action.type) {\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst db = getDb('message-types')\r\n\r\nexport default persistentReducer(messageTypes, {db: db, name: \"message-types\"})\r\n","import getDb from '../databases'\r\nimport { SAVE_DRAFT, PUSH_MESSAGES, REMOVE_ALL_MESSAGES, UPDATE_MESSAGES, SEND_DRAFT_MESSAGE } from '../actions/messages'\r\n\r\nexport const db = getDb('messages', true)\r\n// const dbClones = {}\r\n\r\nlet initialState = {}\r\n\r\nconst messages = (state = initialState, action) => {\r\n\r\n  switch (action.type) {\r\n    case PUSH_MESSAGES:\r\n      let messages = initAdditionalAttributes(action.payload.messages)\r\n      if(messages.length === 1)\r\n        db.put(messages[0])\r\n      else {\r\n        db.bulkDocs(messages)\r\n      }\r\n      return state\r\n    case REMOVE_ALL_MESSAGES:\r\n      db.allDocs().then(result => {\r\n        return Promise.all(result.rows.map(row => {\r\n          if(row.id.search(\"_design\") === -1) {\r\n            return db.remove(row.id, row.value.rev)\r\n          }\r\n          return false\r\n        }));\r\n      })\r\n      return {}\r\n    case UPDATE_MESSAGES:\r\n      return {\r\n        ...state,\r\n        [action.payload.chatId]: action.payload.messages\r\n      }\r\n    case SAVE_DRAFT:\r\n      let message = {\r\n        ...(initAdditionalAttributes([action.payload.message])[0]),\r\n        draft: true\r\n      }\r\n\r\n      if(action.payload.message._id)\r\n        message._id = action.payload.message._id\r\n\r\n      if(action.payload.message._rev)\r\n        message._rev = action.payload.message._rev\r\n\r\n      db.put(message)\r\n\r\n      return state\r\n    case SEND_DRAFT_MESSAGE:\r\n      db.get(action.payload.message._id).then(row => {\r\n        db.bulkDocs([\r\n          {...initAdditionalAttributes([action.payload.message])[0], _rev: \"\"},\r\n          {...row, _deleted: true}\r\n        ])\r\n      })\r\n      return state\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst getId = (key) => {\r\n  return new Date().toISOString() + \"-\" + (key || '0')\r\n}\r\n\r\nconst initAdditionalAttributes = (messages) => {\r\n  return messages.map((message, key) => {\r\n    return {\r\n      ...message,\r\n      _id: getId(key),\r\n      draft: false\r\n    }\r\n  })\r\n}\r\n\r\nexport default messages\r\n","import { UPDATE_REWIND_POINTS } from '../actions/rewindPoints'\r\n\r\nconst initialState = {\r\n  points: [],\r\n  activeRewind: null\r\n}\r\n\r\nconst rewindPoints = (state = initialState, action) => {\r\n\r\n  switch (action.type) {\r\n    case UPDATE_REWIND_POINTS:\r\n      return {\r\n        ...state,\r\n        points: action.payload.points\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default rewindPoints\r\n","import { persistentReducer } from 'redux-pouchdb-rethink'\r\nimport getDb from '../databases'\r\nimport { CREATE_EXPORT, REMOVE_EXPORTS } from '../actions/exportItems'\r\n\r\nconst initialState = []\r\n\r\nconst exportItems = (state = initialState, action) => {\r\n\r\n  switch (action.type) {\r\n    case CREATE_EXPORT:\r\n      return [...state, action.payload]\r\n    case REMOVE_EXPORTS:\r\n      return []\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst db = getDb('exports')\r\n\r\nexport default persistentReducer(exportItems, {db: db, name: \"exports\"})\r\n","import { combineReducers } from 'redux'\r\nimport chats from './chats'\r\nimport messageTypes from './messageTypes'\r\nimport messages from './messages'\r\nimport rewindPoints from './rewindPoints'\r\nimport exportItems from './exportItems'\r\n\r\nexport default combineReducers({\r\n  chats,\r\n  messageTypes,\r\n  messages,\r\n  rewindPoints,\r\n  exportItems\r\n})\r\n","import getDb, { dbOptions } from '../../databases'\r\n\r\nimport {\r\n  updateRewindPoints,\r\n  // createTmpPoint,\r\n  CREATE_REWIND_POINT,\r\n  // REMOVE_REWIND_POINT,\r\n  SELECT_REWIND_POINT\r\n} from '../../actions/rewindPoints'\r\n\r\nimport { INIT } from  '../../actions/init'\r\n\r\nconst rewindPoints = (store, next, action, db, messagesDb) => {\r\n  switch (action.type) {\r\n    case INIT:\r\n      init(db, store)\r\n    break\r\n    case CREATE_REWIND_POINT:\r\n      cloneDatabase(messagesDb, dbOptions.messages).then(clonedData => {\r\n        db.put({\r\n          ...initAdditionalAttributes(action.payload),\r\n          ...clonedData\r\n        }).then(point => {\r\n          updateLocalRewindPoints(db, store)\r\n        })\r\n      })\r\n    break\r\n    case SELECT_REWIND_POINT:\r\n      db.allDocs({include_docs: true}).then(({ rows }) => {\r\n        const changedDocs = rows.filter(row => (row.doc.active || row.doc._id === action.payload.id))\r\n                                .map(item => ({...item.doc, active: !item.doc.active}))\r\n\r\n        db.bulkDocs(changedDocs).then(() => {\r\n          updateLocalRewindPoints(db, store)\r\n        })\r\n      })\r\n    break\r\n    default:\r\n      return false\r\n  }\r\n  return true\r\n}\r\n\r\nconst cloneDatabase = (db, options) => {\r\n  return new Promise((resolve, reject) => {\r\n    const id = getId()\r\n    const messagesDbName = options.name + '-rewind-' + id;\r\n    const newDb = getDb(messagesDbName)\r\n\r\n    newDb.replicate.from(db, {\r\n      live: false,\r\n      retry: false,\r\n      filter: 'filtermessages/cloneFilter'\r\n    }).on('complete', done => {\r\n      console.log('success', done);\r\n      if(options.remote) {\r\n        const messagesRemoteDbName = options.remote + '-rewind-' + id\r\n        const remoteDb = getDb(messagesRemoteDbName)\r\n        remoteDb.replicate.from(newDb, {\r\n          live: false,\r\n          retry: false\r\n        }).on('complete', doneRemote => {\r\n          resolve({_id: id, local: messagesDbName, remote: true})\r\n        }).on('error', err => {\r\n          console.log(\"Error on remote database sync, created only local db\");\r\n          console.log(err)\r\n          resolve({_id: id, local: messagesDbName, remote: false})\r\n        })\r\n      }\r\n      else {\r\n        resolve({_id: id, local: messagesDbName, remote: false})\r\n      }\r\n    }).on('error', err => {\r\n      console.log(\"Error on local db clone\");\r\n      console.log(err)\r\n      reject()\r\n    })\r\n  })\r\n}\r\n\r\nconst init = (db, store) => {\r\n  updateLocalRewindPoints(db, store)\r\n}\r\n\r\nconst updateLocalRewindPoints = (db, store) => {\r\n  db.allDocs({include_docs: true}).then(({rows}) => {\r\n    store.dispatch(updateRewindPoints(rows))\r\n  })\r\n}\r\n\r\nconst getId = (key) => {\r\n  return new Date().toISOString() + \"-\" + (key || '0')\r\n}\r\n\r\nconst initAdditionalAttributes = (rewindPoint) => {\r\n  return {\r\n    ...rewindPoint,\r\n    active: false,\r\n    roomId: \"\"\r\n  }\r\n}\r\n\r\nexport default rewindPoints\r\n","import { CREATE_EXPORT } from '../../actions/exportItems'\r\n\r\nconst rewindPoints = (store, next, action, db, messagesDb) => {\r\n  switch (action.type) {\r\n    case CREATE_EXPORT:\r\n      checkMessageTypes(null, null, action.payload.messageTypes, messagesDb, result => {\r\n        next({...action, payload: {\r\n          name: `Export: ${new Date().toISOString().slice(0, 19).replace('T', ' ')}`,\r\n          data: result\r\n        }})\r\n      })\r\n      break\r\n    default:\r\n      return false\r\n  }\r\n  return true\r\n}\r\n\r\nconst findByMessageType = (db, messageType) => {\r\n  return db.query((doc, emit) => {\r\n    emit(doc.type)\r\n  }, {key: messageType, include_docs: true})\r\n}\r\n\r\nconst checkMessageTypes = (key, data, messageTypes, db, f) => {\r\n  if(!key) key = 0\r\n  if(!data) data = []\r\n  if(messageTypes[key]) {\r\n    findByMessageType(db, messageTypes[key].scheme).then(({rows}) => {\r\n      data.push({\r\n        title: messageTypes[key].title,\r\n        data: rows\r\n      })\r\n      checkMessageTypes(key+1, data, messageTypes, db, f)\r\n    });\r\n  }\r\n  else {\r\n    f(data)\r\n  }\r\n}\r\n\r\nexport default rewindPoints\r\n","import rewindPoints from './rewindPoints'\r\nimport exportItems from './exportItems'\r\n// import messages from './messages'\r\nimport getDb from '../../databases'\r\n\r\n//get databases\r\nconst rewindPointsDb = getDb('rewind-points')\r\nconst messagesDb = getDb('messages', false)\r\n//watchers\r\nconst pouchdbMiddleware = store => next => action => {\r\n  let rewindAction = rewindPoints(store, next, action, rewindPointsDb, messagesDb)\r\n  let exportAction = exportItems(store, next, action, rewindPointsDb, messagesDb)\r\n\r\n  if (!(rewindAction || exportAction)) {\r\n    next(action)\r\n  }\r\n}\r\n\r\nexport default pouchdbMiddleware\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport Root from './components/root'\r\nimport * as serviceWorker from './serviceWorker'\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\nimport '@json-editor/json-editor/src/styles/starrating.css'\r\nimport 'react-perfect-scrollbar/dist/css/styles.css'\r\nimport '@fortawesome/fontawesome-free/css/all.css'\r\nimport reducers from './reducers'\r\nimport { persistentStore } from 'redux-pouchdb-rethink'\r\nimport thunk from 'redux-thunk'\r\nimport { createStore, applyMiddleware } from 'redux'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport pouchdbSync from './middlewares/pouchdb'\r\nimport getDb from './databases'\r\n\r\nconst applyMiddlewares = applyMiddleware(\r\n  thunk, pouchdbSync\r\n)\r\nconsole.log(process.env.REACT_APP_ENV);\r\nconst db = getDb('main')\r\n\r\nconst createStoreWithMiddleware = composeWithDevTools(\r\n  applyMiddlewares,\r\n  persistentStore({db}),\r\n)(createStore)\r\n\r\nconst store = createStoreWithMiddleware(reducers)\r\n\r\nReactDOM.render(\r\n  <Root store={store}/>,\r\n  document.getElementById('root')\r\n)\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister()\r\n"],"sourceRoot":""}